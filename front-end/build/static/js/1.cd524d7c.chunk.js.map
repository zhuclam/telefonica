{"version":3,"sources":["../node_modules/reactstrap/es/Table.js","features/SearchAndEdit/components/SearchForm.tsx","features/SearchAndEdit/components/SearchResult.tsx","features/SearchAndEdit/components/EditPhone.tsx","features/SearchAndEdit/SearchAndEdit.tsx"],"names":["propTypes","className","PropTypes","string","cssModule","object","size","bordered","bool","borderless","striped","dark","hover","responsive","oneOfType","tag","tagPropType","responsiveTag","innerRef","func","Table","props","Tag","ResponsiveTag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","table","React","createElement","_extends","ref","responsiveClassName","defaultProps","Error","children","delocalizeDateString","date","split","reverse","join","SearchForm","onSearch","isImport","territories","useConfig","useForm","mode","reValidateMode","defaultValues","count","territoryId","register","handleSubmit","errors","reset","setValue","getValues","formState","isDirty","isSubmitting","isValid","forceUpdate","useRerender","Form","onSubmit","info","number","id","answeredOn","calledOn","noWeekends","noCall","nonExistent","comments","territoryName","filters","find","t","name","toString","Row","Col","xs","md","FormGroup","Label","noEmptyValue","excludeCurrent","Input","type","validate","d","for","autoComplete","check","checked","onChange","e","target","shouldDirty","pattern","placeholder","Button","block","outline","onClick","disabled","color","any","SearchResult","entries","onEditRequest","onDeleteRequest","onDeleteManyRequest","onImport","isImporting","currentTerritory","buildCheckedInputs","useCallback","reduce","acc","curr","useState","checkedInputs","setCheckedInputs","allSelected","useMemo","Object","values","some","selectedCount","filter","Boolean","length","Hr","ActionPanel","style","margin","map","parseInt","Thead","campaignMode","Tbody","phone","Centered","PhoneCell","unansweredDate","fulfilledOn","postponedDays","campaignStatus","ActionCell","a","document","href","body","appendChild","click","remove","onSelfAssign","styled","thead","tbody","td","div","theme","text","colors","white","darkMode","css","black","hr","EditPhone","onBack","onUpdated","isLoading","setIsLoading","Fetch","useFetch","AlertManager","useAlerts","onSaveEdition","formData","put","err","updatedPhone","show","position","variant","Container","fulfill","breadcrumbItems","title","linkTo","importBreadcrumbItems","SearchAndEdit","foundPhones","setFoundPhones","foundCount","setFoundCount","setIsImporting","editingPhone","setEditingPhone","isDeleting","setIsDeleting","testModeEnabled","useConfirmationModal","isDeleteModalOpen","isModalOpen","idToDelete","data","askDeleteOneConfirmation","askEditConfirmation","toggleDeleteOneModal","toggleModal","resetDeleteConfirmationModal","isDeleteManyModalOpen","idListToDelete","askDeleteManyConfirmation","toggleDeleteManyModal","resetDeleteManyConfirmationModal","useEffect","handleSearch","get","path","params","k","v","result","phones","confirmDeletion","delete","p","confirmManyDeletion","ids","newPhones","includes","handleImport","post","phoneToDelete","items","fluid","isOpen","onConfirm","buttonColor","confirmationLabel"],"mappings":"8GAAA,yEAMIA,EAAY,CACdC,UAAWC,IAAUC,OACrBC,UAAWF,IAAUG,OACrBC,KAAMJ,IAAUC,OAChBI,SAAUL,IAAUM,KACpBC,WAAYP,IAAUM,KACtBE,QAASR,IAAUM,KACnBG,KAAMT,IAAUM,KAChBI,MAAOV,IAAUM,KACjBK,WAAYX,IAAUY,UAAU,CAACZ,IAAUM,KAAMN,IAAUC,SAC3DY,IAAKC,IACLC,cAAeD,IACfE,SAAUhB,IAAUY,UAAU,CAACZ,IAAUiB,KAAMjB,IAAUC,OAAQD,IAAUG,UAOzEe,EAAQ,SAAeC,GACzB,IAAIpB,EAAYoB,EAAMpB,UAClBG,EAAYiB,EAAMjB,UAClBE,EAAOe,EAAMf,KACbC,EAAWc,EAAMd,SACjBE,EAAaY,EAAMZ,WACnBC,EAAUW,EAAMX,QAChBC,EAAOU,EAAMV,KACbC,EAAQS,EAAMT,MACdC,EAAaQ,EAAMR,WACnBS,EAAMD,EAAMN,IACZQ,EAAgBF,EAAMJ,cACtBC,EAAWG,EAAMH,SACjBM,EAAaC,YAA8BJ,EAAO,CAAC,YAAa,YAAa,OAAQ,WAAY,aAAc,UAAW,OAAQ,QAAS,aAAc,MAAO,gBAAiB,aAEjLK,EAAUC,YAAgBC,IAAW3B,EAAW,UAASK,GAAO,SAAWA,IAAcC,GAAW,mBAA0BE,GAAa,qBAA4BC,GAAU,kBAAyBC,GAAO,eAAsBC,GAAQ,eAAwBR,GACvQyB,EAAqBC,IAAMC,cAAcT,EAAKU,YAAS,GAAIR,EAAY,CACzES,IAAKf,EACLjB,UAAWyB,KAGb,GAAIb,EAAY,CACd,IAAIqB,EAAsBP,aAA+B,IAAfd,EAAsB,mBAAqB,oBAAsBA,EAAYT,GACvH,OAAoB0B,IAAMC,cAAcR,EAAe,CACrDtB,UAAWiC,GACVL,GAGL,OAAOA,GAGTT,EAAMpB,UAAYA,EAClBoB,EAAMe,aArCa,CACjBpB,IAAK,QACLE,cAAe,OAoCFG,O,sPClDTgB,EAAkB,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAH,OACtB,sBAAMpC,UAAU,cAAhB,SAA+BoC,KAG3BC,EAAuB,SAACC,GAAD,OAC3BA,EAAKC,MAAM,KAAKC,UAAUC,KAAK,MAO3BC,EAAwC,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SACjDC,EAAgBC,cAAhBD,YADgE,EAUpEE,YAA2B,CAC7BC,KAAM,MACNC,eAAgB,WAChBC,cAAe,CACbC,MAAO,IACPC,YAAa,UAZfC,EAHsE,EAGtEA,SACAC,EAJsE,EAItEA,aACAC,EALsE,EAKtEA,OACAC,EANsE,EAMtEA,MACAC,EAPsE,EAOtEA,SACAC,EARsE,EAQtEA,UARsE,IAStEC,UAAaC,EATyD,EASzDA,QAASC,EATgD,EAShDA,aAAcC,EATkC,EASlCA,QA2D9BC,EAAgBC,cAAhBD,YAER,OACE,qCACE,sBAAM/D,UAAU,8BAAhB,8CAGA,eAACiE,EAAA,EAAD,CAAMC,SAAUZ,GAxDG,SAAC,GAYE,IAXxBa,EAWuB,EAXvBA,KACAC,EAUuB,EAVvBA,OACAC,EASuB,EATvBA,GACAC,EAQuB,EARvBA,WACAC,EAOuB,EAPvBA,SACAC,EAMuB,EANvBA,WACAC,EAKuB,EALvBA,OACAC,EAIuB,EAJvBA,YACAC,EAGuB,EAHvBA,SACAxB,EAEuB,EAFvBA,MACayB,EACU,EADvBxB,YAEMyB,EAAmB,GAmBzB,GAjBAA,EAAQ1B,MAAQA,EAEhBgB,IAASU,EAAQV,KAAOA,GACxBC,IAAWS,EAAQT,OAASA,GAC5BC,IAAOQ,EAAQR,GAAKA,GACpBM,IAAaE,EAAQF,SAAWA,GAChCL,IAEOO,EAAQP,WADG,UAAfA,EACyB,QACAjC,EAAqBiC,IACjDC,IAEOM,EAAQN,SADC,UAAbA,EACuB,QACAlC,EAAqBkC,IAC/CC,IAAeK,EAAQL,WAAaA,GACpCC,IAAWI,EAAQJ,OAASA,GAC5BC,IAAgBG,EAAQH,YAAcA,GAClCE,EAAe,CACjB,IAAMP,EAAKxB,EAAYiC,MAAK,SAACC,GAAD,OAAOA,EAAEC,OAASJ,KAAgBP,GAC9DA,IAAOQ,EAAQzB,YAAciB,EAAGY,YAGlCtC,EAASkC,MAmBP,UACE,eAACK,EAAA,EAAD,WACGtC,GACC,cAACuC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,EAAjB,SACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,yBACA,cAAC,IAAD,CACEP,KAAK,cACLhD,IAAKqB,EACLmC,cAAY,EACZC,gBAAc,SAKtB,cAACN,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAIzC,EAAW,EAAI,GAAhC,SACE,eAAC0C,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,iCACA,cAACG,EAAA,EAAD,CACEC,KAAK,SACLX,KAAK,QACL/D,SAAUoC,EAAS,CAAEuC,SAAU,SAACC,GAAD,OAAOA,GAAK,eAKnD,uBACA,eAACX,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAOO,IAAI,KAAX,gBACA,cAACJ,EAAA,EAAD,CAAOrB,GAAG,KAAKW,KAAK,KAAK/D,SAAUoC,EAAU0C,aAAa,aAG9D,cAACZ,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAOO,IAAI,SAAX,uBACA,cAACJ,EAAA,EAAD,CACErB,GAAG,SACHW,KAAK,SACL/D,SAAUoC,EACV0C,aAAa,aAInB,cAACZ,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAOO,IAAI,OAAX,4BACA,cAACJ,EAAA,EAAD,CACErB,GAAG,OACHW,KAAK,OACL/D,SAAUoC,EACV0C,aAAa,gBAKrB,uBACA,eAACb,EAAA,EAAD,WACE,eAACC,EAAA,EAAD,CAAKE,GAAG,IAAR,UACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAOO,IAAI,WAAX,yBACA,cAACJ,EAAA,EAAD,CACErB,GAAG,WACHW,KAAK,WACL/D,SAAUoC,EACV0C,aAAa,WAGjB,cAACT,EAAA,EAAD,CAAWU,OAAK,EAAhB,SACE,eAACT,EAAA,EAAD,CAAOS,OAAK,EAAZ,UACE,cAACN,EAAA,EAAD,CACEC,KAAK,WACLM,QAAmC,MAA1BvC,EAAU,YACnBwC,SAAU,SAACC,GACT1C,EAAS,WAAY0C,EAAEC,OAAOH,QAAU,IAAM,GAAI,CAChDI,aAAa,IAEftC,OARN,iCAeJ,eAACoB,EAAA,EAAD,CAAKE,GAAG,IAAR,UACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAOO,IAAI,aAAX,uCACA,cAACJ,EAAA,EAAD,CACErB,GAAG,aACHW,KAAK,aACL/D,SAAUoC,EAAS,CACjBiD,QAAS,kCAEXC,YAAY,kBACZR,aAAa,QAEdxC,EAAOe,YACN,cAAC,EAAD,yFAKJ,cAACgB,EAAA,EAAD,CAAWU,OAAK,EAAhB,SACE,eAACT,EAAA,EAAD,CAAOS,OAAK,EAAZ,UACE,cAACN,EAAA,EAAD,CACEC,KAAK,WACLM,QAAqC,UAA5BvC,EAAU,cACnBwC,SAAU,SAACC,GACT1C,EAAS,aAAc0C,EAAEC,OAAOH,QAAU,QAAU,GAAI,CACtDI,aAAa,IAEftC,OARN,iCAeJ,eAACoB,EAAA,EAAD,CAAKE,GAAG,IAAR,UACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAOO,IAAI,WAAX,sCACA,cAACJ,EAAA,EAAD,CACErB,GAAG,WACHW,KAAK,WACL/D,SAAUoC,EAAS,CACjBiD,QAAS,kCAEXC,YAAY,kBACZR,aAAa,QAGdxC,EAAOgB,UACN,cAAC,EAAD,yFAKJ,cAACe,EAAA,EAAD,CAAWU,OAAK,EAAhB,SACE,eAACT,EAAA,EAAD,CAAOS,OAAK,EAAZ,UACE,cAACN,EAAA,EAAD,CACEC,KAAK,WACLM,QAAmC,UAA1BvC,EAAU,YACnBwC,SAAU,SAACC,GACT1C,EAAS,WAAY0C,EAAEC,OAAOH,QAAU,QAAU,GAAI,CACpDI,aAAa,IAEftC,OARN,iCAgBN,uBACA,eAACmB,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,cAACC,EAAA,EAAD,CAAWU,OAAK,EAAhB,SACE,eAACT,EAAA,EAAD,CAAOS,OAAK,EAAZ,UACE,cAACN,EAAA,EAAD,CAAOC,KAAK,WAAWX,KAAK,aAAa/D,SAAUoC,IADrD,uCAMJ,cAAC8B,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,cAACC,EAAA,EAAD,CAAWU,OAAK,EAAhB,SACE,eAACT,EAAA,EAAD,CAAOS,OAAK,EAAZ,UACE,cAACN,EAAA,EAAD,CAAOC,KAAK,WAAWX,KAAK,SAAS/D,SAAUoC,IADjD,oBAMJ,cAAC8B,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,cAACC,EAAA,EAAD,CAAWU,OAAK,EAAhB,SACE,eAACT,EAAA,EAAD,CAAOS,OAAK,EAAZ,UACE,cAACN,EAAA,EAAD,CAAOC,KAAK,WAAWX,KAAK,cAAc/D,SAAUoC,IADtD,yBAON,uBACA,eAAC6B,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKE,GAAIzC,EAAW,EAAI,EAAxB,SACE,cAAC4D,EAAA,EAAD,CAAQC,OAAK,EAACC,SAAO,EAACC,QAAS,kBAAMnD,KAArC,8BAIF,cAAC2B,EAAA,EAAD,CAAKE,GAAIzC,EAAW,EAAI,EAAxB,SACE,eAAC4D,EAAA,EAAD,CACEb,KAAK,SACLiB,SACEhE,GACKkB,GAAWD,GACVD,IACCF,EAAU,gBACVA,EAAU,cACVA,EAAU,cACZI,GACDD,EAENgD,MAAM,UACNJ,OAAK,EAbP,mBAeU7D,EAA4B,GAAjB,qBAGrBA,GACA,cAACuC,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,cAACmB,EAAA,EAAD,CAAQK,MAAM,UAAUJ,OAAK,EAACE,QAlOxB,WAChB,IAAM9B,EAAmB,GAEzBA,EAAQ1B,MAAQO,EAAU,SAC1BmB,EAAQiC,KAAM,EAEdnE,EAASkC,IA4NC,sC,ykCC7Rd,IAAMkC,EAA4C,SAAC,GAS5C,IARLC,EAQI,EARJA,QACA7D,EAOI,EAPJA,MACA8D,EAMI,EANJA,cACAC,EAKI,EALJA,gBACAC,EAII,EAJJA,oBACAC,EAGI,EAHJA,SACAxE,EAEI,EAFJA,SACAyE,EACI,EADJA,YACI,EACsCvE,cAAlCwE,EADJ,EACIA,iBAAkBzE,EADtB,EACsBA,YACpB0E,EAAqBC,uBACzB,SAACvB,GAAD,OACEe,EAAQS,QAAO,SAACC,EAAKC,GAEnB,OADAD,EAAIC,EAAKtD,IAAM4B,EACRyB,IACN,MACL,CAACV,IARC,EAUsCY,oBAAqB,kBAC7DL,GAAmB,MAXjB,mBAUGM,EAVH,KAUkBC,EAVlB,KAiBEC,EAAcC,mBAClB,kBAAOC,OAAOC,OAAOL,GAAeM,MAAK,SAAClC,GAAD,OAAcA,OACvD,CAAC4B,IAMGO,EAAgBJ,mBACpB,kBAAMC,OAAOC,OAAOL,GAAeQ,OAAOC,SAASC,SACnD,CAACV,IA0BH,OACE,qCACE,4CACab,EAAQuB,OADrB,OACiCpF,EADjC,kBAGA,cAACqF,EAAD,IACA,cAACC,EAAD,UACGpB,EACC,cAAC,IAAD,IAEA,yCACIe,EADJ,kBAEE,sBAAMM,MAAO,CAAEC,OAAQ,UAAvB,eACA,eAACnC,EAAA,EAAD,CAAQK,MAAM,YAAYF,QA5CV,kBACxBmB,EAAiBP,GAAoBQ,KA2C7B,UACGA,EAAc,MAAQ,IADzB,sBAGCnF,EACC,cAAC4D,EAAA,EAAD,CACEK,MAAM,UACND,SAA4B,IAAlBwB,EACVzB,QApCO,kBACnBS,EACEa,OAAOjB,QAAQa,GACZQ,QAAO,0CACPO,KAAI,gBAAEvE,EAAF,2BAAUwE,SAASxE,QA6BlB,8CAQA,cAACmC,EAAA,EAAD,CACEK,MAAM,SACND,SAA4B,IAAlBwB,EACVzB,QAnDW,kBACvBQ,EACEc,OAAOjB,QAAQa,GACZQ,QAAO,0CACPO,KAAI,gBAAEvE,EAAF,2BAAUwE,SAASxE,QA4ClB,iDAWR,eAAClD,EAAA,EAAD,CAAOV,SAAO,EAACG,YAAU,EAAzB,UACE,cAACkI,EAAD,UACE,+BACE,uBACA,oCACClG,GAAY,4CACb,2CACA,sCACA,uDACA,8DACA,6CACA,mDACA,qDACEA,KAAc0E,EAAiByB,cAC/B,oBAAIL,MAAO,CAAE7B,MAAO,QAApB,uCAEAjE,GAAY,+CAGlB,cAACoG,EAAD,UACGhC,EAAQ4B,KAAI,SAACK,GAAD,aACX,+BACE,6BACE,cAACC,EAAD,UACE,cAACxD,EAAA,EAAD,CACEC,KAAK,WACLM,QAAS4B,EAAcoB,EAAM5E,IAC7B6B,SAAU,SAACC,GAAD,OAtGN9B,EAsG0B4E,EAAM5E,GAtGpB4B,EAsGwBE,EAAEC,OAAOH,QArGjE6B,EAAiB,2BAAKD,GAAN,kBAAsBxD,EAAK4B,KADxB,IAAC5B,EAAY4B,SA0GtB,6BAAKgD,EAAM5E,KACVzB,GACC,uCACGC,EAAYiC,MAAK,SAACC,GAAD,OAAOA,EAAEV,KAAO4E,EAAM7F,sBAD1C,aACG,EAAqD4B,OAG1D,cAACmE,EAAD,UAAYF,EAAMA,QAClB,6BAAKA,EAAM9E,OACX,6BAAK8E,EAAMG,gBAAkBH,EAAMI,aAAe,UAClD,6BAAKJ,EAAM3E,YAAc,UACzB,6BAAK2E,EAAMtE,WACX,6BAAKsE,EAAMK,gBACX,6BACG,CACCL,EAAMxE,QAAU,aAChBwE,EAAMvE,aAAe,YACrBuE,EAAMzE,YAAc,uBAEnB6D,OAAOC,SACP7F,KAAK,SAERG,KAAc0E,EAAiByB,cAC/B,oBAAIL,MAAO,CAAE7B,MAAO,QAApB,SACGoC,EAAMM,eAAiB,QAAO,QAGjC3G,GACA,eAAC4G,EAAD,WACE,cAAChD,EAAA,EAAD,CACEK,MAAM,UACNF,QAAS,kBA1GN,SAACtC,GACpB,IAAMoF,EAAIC,SAAS5H,cAAc,KACjC2H,EAAEE,KAAF,WAAarC,EAAiBtC,KAA9B,0BAAoDX,GACpDoF,EAAErD,OAAS,SACXsD,SAASE,KAAKC,YAAYJ,GAC1BA,EAAEK,QACFL,EAAEM,SAoG6BC,CAAaf,EAAM5E,KAFpC,yBAMA,cAACmC,EAAA,EAAD,CAAQK,MAAM,UAAUF,QAAS,kBAAMM,EAAcgC,IAArD,oBAGA,cAACzC,EAAA,EAAD,CACEK,MAAM,SACNF,QAAS,kBAAMO,EAAgB+B,EAAM5E,KAFvC,yBA/CG4E,EAAM5E,gBA+DrByE,EAAQmB,IAAOC,MAAV,KAQLlB,EAAQiB,IAAOE,MAAV,KAILhB,EAAYc,IAAOG,GAAV,KAITZ,EAAaS,IAAOG,GAAV,KAQV3B,EAAcwB,IAAOI,IAAV,KAKD,qBAAGC,MAAkBC,KAAKC,OAAOC,SAG7C,gBAAGH,EAAH,EAAGA,MAAH,OACAA,EAAMI,UACNC,YADA,IAEgBL,EAAMC,KAAKC,OAAOI,MACvBN,EAAMC,KAAKC,OAAOC,UAQ3BvB,EAAWe,IAAOI,IAAV,KAKR7B,EAAKyB,IAAOY,GAAV,KACQ,qBAAGP,MACTI,UAAY,oCCxNhBI,EAAsC,SAAC,GAAkC,IAAD,EAA/B7B,EAA+B,EAA/BA,MAAO8B,EAAwB,EAAxBA,OAAQC,EAAgB,EAAhBA,UAAgB,EAMxEjI,YAAwB,CAC1BC,KAAM,MACNC,eAAgB,WAChBC,cAAe,CACb+F,MAAOA,EAAMA,MACbtE,SAAUsE,EAAMtE,SAChBR,KAAI,UAAE8E,EAAM9E,YAAR,QAAgB,GACpBM,OAAQwE,EAAMxE,OACdC,YAAauE,EAAMvE,YACnB4E,cAAeL,EAAMK,cACrB9E,WAAYyE,EAAMzE,cAdpBnB,EAF0E,EAE1EA,SACAC,EAH0E,EAG1EA,aACAC,EAJ0E,EAI1EA,OAJ0E,IAK1EI,UAAaC,EAL6D,EAK7DA,QAASE,EALoD,EAKpDA,QALoD,EAoB1C8D,oBAAkB,GApBwB,mBAoBrEqD,EApBqE,KAoB1DC,EApB0D,KAsBtEC,EAAQC,cACNC,EAAiBC,cAAjBD,aAEFE,EAAa,uCAAG,WAAOC,GAAP,qBAAA/B,EAAA,sEAElByB,GAAa,GAFK,SAIgBC,IAAQM,IAAR,iBAGtBxC,EAAM5E,IAAMmH,GAPN,sCAIXE,EAJW,KAINC,EAJM,MASdD,EATc,uBASHA,EATG,QAWlBV,EAAUW,EAAa1C,OACvBoC,EAAaO,KAAK,kBAZA,kDAclBP,EAAaO,KAAK,gBAdA,yBAgBlBV,GAAa,GAhBK,6EAAH,sDAoBnB,OACE,qCACE,cAAC,IAAD,CAAOlG,KAAK,iBAAiB6G,SAAS,MAAMC,QAAQ,UAApD,4DAGA,cAAC,IAAD,CAAO9G,KAAK,eAAe6G,SAAS,SAASC,QAAQ,UAArD,gFAGA,eAACC,EAAA,EAAD,CAAW/L,UAAU,OAArB,UACE,kDACA,eAACiE,EAAA,EAAD,CAAMC,SAAUZ,EAAaiI,GAA7B,UACE,eAACrG,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,wBACA,cAACG,EAAA,EAAD,CAAOV,KAAK,QAAQ/D,SAAUoC,SAGlC,cAAC8B,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,mBACA,cAACG,EAAA,EAAD,CAAOV,KAAK,OAAO/D,SAAUoC,SAGjC,eAAC8B,EAAA,EAAD,CAAKE,GAAG,IAAR,UACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,gCACA,cAACG,EAAA,EAAD,CACEC,KAAK,SACLX,KAAK,gBACL/D,SAAUoC,EAAS,CAAEuC,SAAU,SAACC,GAAD,OAAOA,GAAK,UAG9CtC,EAAO+F,eACN,sBAAMtJ,UAAU,cAAhB,kCAGJ,cAACmF,EAAA,EAAD,CAAKE,GAAG,KAAR,SACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,0BACA,cAACG,EAAA,EAAD,CAAOV,KAAK,WAAW/D,SAAUoC,SAGrC,cAAC8B,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,cAACC,EAAA,EAAD,CAAWU,OAAK,EAAhB,SACE,eAACT,EAAA,EAAD,CAAOS,OAAK,EAAZ,UACE,cAACN,EAAA,EAAD,CACEC,KAAK,WACLX,KAAK,aACL/D,SAAUoC,IAJd,6BAUJ,cAAC8B,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,cAACC,EAAA,EAAD,CAAWU,OAAK,EAAhB,SACE,eAACT,EAAA,EAAD,CAAOS,OAAK,EAAZ,UACE,cAACN,EAAA,EAAD,CAAOC,KAAK,WAAWX,KAAK,SAAS/D,SAAUoC,IADjD,oBAMJ,cAAC8B,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,cAACC,EAAA,EAAD,CAAWU,OAAK,EAAhB,SACE,eAACT,EAAA,EAAD,CAAOS,OAAK,EAAZ,UACE,cAACN,EAAA,EAAD,CACEC,KAAK,WACLX,KAAK,cACL/D,SAAUoC,IAJd,yBAWN,uBACA,eAAC6B,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,cAACmB,EAAA,EAAD,CAAQE,SAAO,EAACD,OAAK,EAACE,QAASoE,EAA/B,+BAIF,cAAC5F,EAAA,EAAD,CAAKE,GAAG,IAAR,SACE,cAACmB,EAAA,EAAD,CACEb,KAAK,SACLc,OAAK,EACLI,MAAM,UACND,UAAWhD,IAAYE,EAJzB,SAMGmH,EAAY,cAAC,IAAD,CAASe,SAAO,IAAM,2BC7J7CC,EAAkB,CACtB,CACEC,MAAO,6BACPC,OAAQ,gBAEV,CACED,MAAO,oBAILE,EAAwB,CAC5B,CACEF,MAAO,6BACPC,OAAQ,gBAEV,CACED,MAAO,qBACPC,OAAQ,2BAEV,CACED,MAAO,aAQLG,EAAuD,SAAC,GAEvD,IAAD,IADJzJ,gBACI,WACkCgF,mBAEpC,MAHE,mBACG0E,EADH,KACgBC,EADhB,OAIgC3E,mBAAkC,GAJlE,mBAIG4E,EAJH,KAIeC,EAJf,OAK8B7E,oBAAkB,GALhD,mBAKGqD,EALH,KAKcC,EALd,OAMkCtD,oBAAkB,GANpD,mBAMGP,EANH,KAMgBqF,EANhB,OAQoC9E,mBAAuB,MAR3D,mBAQG+E,EARH,KAQiBC,EARjB,OAUgChF,oBAAkB,GAVlD,mBAUGiF,EAVH,KAUeC,EAVf,KAYIC,EAAoBjK,cAApBiK,gBAZJ,EAoBAC,cALWC,EAfX,EAeFC,YACMC,EAhBJ,EAgBFC,KACqBC,EAjBnB,EAiBFC,oBACaC,EAlBX,EAkBFC,YACOC,EAnBL,EAmBFjK,MAnBE,EA4BAwJ,cALWU,EAvBX,EAuBFR,YACMS,EAxBJ,EAwBFP,KACqBQ,EAzBnB,EAyBFN,oBACaO,EA1BX,EA0BFL,YACOM,GA3BL,EA2BFtK,MAGFuK,qBAAU,WACRxB,EAAe,MACfE,EAAc,GACdG,EAAgB,QACf,CAACG,IAEJ,IAAM5B,GAAQC,cACNC,GAAiBC,cAAjBD,aAEF2C,GAAY,uCAAG,WAAOnJ,GAAP,qBAAA4E,EAAA,sEAEjByB,GAAa,GAFI,SAIWC,KAAQ8C,IAAoB,CACtDC,KAAM,SACNC,OAAQlG,OAAOjB,QAAQnC,GACpB+D,KAAI,mCAAEwF,EAAF,KAAKC,EAAL,WAAY,CAACD,EAAgB,mBAANC,EAAkBA,EAAIA,EAAI,EAAI,MACzD5G,QACC,SAACC,EAAD,0BAAO0G,EAAP,KAAUC,EAAV,wBAAC,eAAsB3G,GAAvB,kBAA6B0G,EAAIC,MACjC,MAVW,sCAIV3C,EAJU,KAIL4C,EAJK,MAcb5C,EAda,uBAcFA,EAdE,QAgBjBa,EAAe+B,EAAOC,QACtB9B,EAAc6B,EAAOnL,OAjBJ,kDAmBjBkI,GAAaO,KAAK,gBAnBD,yBAqBjBV,GAAa,GArBI,6EAAH,sDAgCZsD,GAAe,uCAAG,gCAAA/E,EAAA,sEAEpBqD,GAAc,GAFM,SAIA3B,KAAQsD,OAAR,iBAAyBtB,IAJzB,wCAIbzB,EAJa,4BAMLA,EANK,OAQpB+B,IACAlB,EAAeD,EAAajE,QAAO,SAACqG,GAAD,OAAOA,EAAErK,KAAO8I,MACnDV,EAAcD,EAAa,GAVP,kDAYpBnB,GAAaO,KAAK,kBAZE,yBAcpBkB,GAAc,GAdM,6EAAH,qDAkBf6B,GAAmB,uCAAG,kCAAAlF,EAAA,yDACrBkE,EADqB,iEAGxBb,GAAc,GAHU,SAKJ3B,KAAQsD,OAA0B,cAAe,CACnEG,IAAKjB,IANiB,wCAKjBjC,EALiB,6BASTA,EATS,QAWlBmD,EAAYvC,EAAajE,QAC7B,SAACqG,GAAD,OAAQf,EAAemB,SAASJ,EAAErK,OAEpCkI,EAAesC,GACfpC,EAAcD,EAAamB,EAAepF,QAC1CuF,KAhBwB,kDAkBxBzC,GAAaO,KAAK,kBAlBM,yBAoBxBkB,GAAc,GApBU,6EAAH,qDAwBnBiC,GAAY,uCAAG,WAAOH,GAAP,qBAAAnF,EAAA,yDACA,IAAfmF,EAAIrG,OADW,iEAGjBmE,GAAe,GAHE,SAKGvB,KAAQ6D,KAC1B,gBACA,CACEJ,QARa,wCAKVlD,EALU,6BAYFA,EAZE,QAcXmD,EAAYvC,EAAajE,QAAO,SAACqG,GAAD,OAAQE,EAAIE,SAASJ,EAAErK,OAC7DkI,EAAesC,GACfpC,EAAcD,EAAaoC,EAAIrG,QAC/B8C,GAAaO,KAAK,kBAjBD,kDAmBjBP,GAAaO,KAAK,gBAnBD,yBAqBjBc,GAAe,GArBE,6EAAH,sDAiClB,GAAqB,OAAjBC,EACF,OACE,cAAC,EAAD,CACE1D,MAAO0D,EACP5B,OAZa,kBAAM6B,EAAgB,OAanC5B,UAXqB,SAACW,GAAD,OACzBW,GACAC,EACED,EAAY1D,KAAI,SAAC8F,GAAD,OAAQA,EAAErK,KAAOsH,EAAatH,GAAKsH,EAAe+C,SAYtE,IAAMO,GACW,OAAf9B,IAAA,OAAuBb,QAAvB,IAAuBA,OAAvB,EAAuBA,EAAaxH,MAAK,SAAC4J,GAAD,OAAOA,EAAErK,KAAO8I,MAE3D,OACE,qCACE,cAAC,IAAD,CAAOnI,KAAK,eAAe6G,SAAS,MAAMC,QAAQ,UAAlD,6DAGA,cAAC,IAAD,CAAO9G,KAAK,iBAAiB6G,SAAS,MAAMC,QAAQ,UAApD,+DAGA,cAAC,IAAD,CAAO9G,KAAK,iBAAiB6G,SAAS,MAAMC,QAAQ,UAApD,qDAGA,cAAC,IAAD,CAAO9G,KAAK,eAAe6G,SAAS,MAAMC,QAAQ,UAAlD,+DAGA,eAACC,EAAA,EAAD,CAAW/L,UAAU,YAArB,UACE,cAAC,IAAD,CACEkP,MAAOtM,EAAWwJ,EAAwBH,IAE5C,cAAC,EAAD,CAAYtJ,SAAUqL,GAAcpL,SAAUA,OAEhD,cAACmJ,EAAA,EAAD,CAAWoD,OAAK,EAAhB,SACGlE,EACC,cAAC,IAAD,IAEAqB,GACE,cAAC,EAAD,CACE1J,SAAUA,EACVoE,QAASsF,EACTnJ,MAAOqJ,EACPvF,cA3Hc,SAACgC,GAAD,OAAkB2D,EAAgB3D,IA4HhD/B,gBA1HgB,SAAC7C,GAAD,OAAgBgJ,EAAyBhJ,IA2HzD8C,oBAzHoB,SAACyH,GAAD,OAC9BhB,EAA0BgB,IAyHhBxH,SAAU2H,GACV1H,YAAaA,MAKL,OAAf8F,GAAuB8B,IACtB,cAAC,IAAD,CACEG,OAAQnC,EACRO,YAAaD,EACb8B,UAAWb,GACXtC,MAAM,wDACNtC,KACEiD,EACE,cAAC,IAAD,CAASb,SAAO,IAEhB,gCACE,uBAAMhM,UAAU,UAAhB,iBAA+BiP,GAAc5K,MAC7C,uBAAMrE,UAAU,UAAhB,wBAAmCiP,GAAchG,SACjD,uBAAMjJ,UAAU,UAAhB,mBAAiCiP,GAAc9K,WAIrDmL,YAAY,SACZC,kBAAkB,0BAGF,OAAnB5B,GACC,cAAC,IAAD,CACEyB,OAAQ1B,EACRF,YAAaK,EACbwB,UAAWV,GACXzC,MAAK,wCAAgCyB,EAAepF,OAA/C,gBACLqB,KAAMiD,GAAc,cAAC,IAAD,CAASb,SAAO,IACpCsD,YAAY,SACZC,kBAAkB","file":"static/js/1.cd524d7c.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  borderless: PropTypes.bool,\n  striped: PropTypes.bool,\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: tagPropType,\n  responsiveTag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.object])\n};\nvar defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div'\n};\n\nvar Table = function Table(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      size = props.size,\n      bordered = props.bordered,\n      borderless = props.borderless,\n      striped = props.striped,\n      dark = props.dark,\n      hover = props.hover,\n      responsive = props.responsive,\n      Tag = props.tag,\n      ResponsiveTag = props.responsiveTag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"size\", \"bordered\", \"borderless\", \"striped\", \"dark\", \"hover\", \"responsive\", \"tag\", \"responsiveTag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'table', size ? 'table-' + size : false, bordered ? 'table-bordered' : false, borderless ? 'table-borderless' : false, striped ? 'table-striped' : false, dark ? 'table-dark' : false, hover ? 'table-hover' : false), cssModule);\n  var table = /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    ref: innerRef,\n    className: classes\n  }));\n\n  if (responsive) {\n    var responsiveClassName = mapToCssModules(responsive === true ? 'table-responsive' : \"table-responsive-\" + responsive, cssModule);\n    return /*#__PURE__*/React.createElement(ResponsiveTag, {\n      className: responsiveClassName\n    }, table);\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\nexport default Table;","import React from 'react'\r\nimport { Button, Col, Form, FormGroup, Input, Label, Row } from 'reactstrap'\r\nimport { useForm } from 'react-hook-form'\r\nimport { Filters } from '../types'\r\nimport { useRerender } from 'hooks/utils'\r\nimport { TerritorySelector } from 'components'\r\nimport { useConfig } from 'hooks'\r\n\r\nconst Error: React.FC = ({ children }) => (\r\n  <span className=\"text-danger\">{children}</span>\r\n)\r\n\r\nconst delocalizeDateString = (date: string): string =>\r\n  date.split('/').reverse().join('-')\r\n\r\ninterface SearchFormProps {\r\n  onSearch: (filters: Filters) => void\r\n  isImport: boolean\r\n}\r\n\r\nconst SearchForm: React.FC<SearchFormProps> = ({ onSearch, isImport }) => {\r\n  const { territories } = useConfig()\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    errors,\r\n    reset,\r\n    setValue,\r\n    getValues,\r\n    formState: { isDirty, isSubmitting, isValid },\r\n  } = useForm<Required<Filters>>({\r\n    mode: 'all',\r\n    reValidateMode: 'onChange',\r\n    defaultValues: {\r\n      count: 100,\r\n      territoryId: 'base',\r\n    },\r\n  })\r\n\r\n  const onApplyFilters = ({\r\n    info,\r\n    number,\r\n    id,\r\n    answeredOn,\r\n    calledOn,\r\n    noWeekends,\r\n    noCall,\r\n    nonExistent,\r\n    comments,\r\n    count,\r\n    territoryId: territoryName,\r\n  }: Required<Filters>) => {\r\n    const filters: Filters = {}\r\n\r\n    filters.count = count\r\n\r\n    info && (filters.info = info)\r\n    number && (filters.number = number)\r\n    id && (filters.id = id)\r\n    comments && (filters.comments = comments)\r\n    answeredOn &&\r\n      (answeredOn === 'Nunca'\r\n        ? (filters.answeredOn = 'never')\r\n        : (filters.answeredOn = delocalizeDateString(answeredOn)))\r\n    calledOn &&\r\n      (calledOn === 'Nunca'\r\n        ? (filters.calledOn = 'never')\r\n        : (filters.calledOn = delocalizeDateString(calledOn)))\r\n    noWeekends && (filters.noWeekends = noWeekends)\r\n    noCall && (filters.noCall = noCall)\r\n    nonExistent && (filters.nonExistent = nonExistent)\r\n    if (territoryName) {\r\n      const id = territories.find((t) => t.name === territoryName)!.id\r\n      id && (filters.territoryId = id.toString())\r\n    }\r\n\r\n    onSearch(filters)\r\n  }\r\n\r\n  const searchAny = () => {\r\n    const filters: Filters = {}\r\n\r\n    filters.count = getValues('count')\r\n    filters.any = true\r\n\r\n    onSearch(filters)\r\n  }\r\n\r\n  const { forceUpdate } = useRerender()\r\n\r\n  return (\r\n    <>\r\n      <span className=\"text-secondary d-block mb-3\">\r\n        Todos los campos son opcionales.\r\n      </span>\r\n      <Form onSubmit={handleSubmit(onApplyFilters)}>\r\n        <Row>\r\n          {isImport && (\r\n            <Col xs={12} md={6}>\r\n              <FormGroup>\r\n                <Label>Territorio</Label>\r\n                <TerritorySelector\r\n                  name=\"territoryId\"\r\n                  ref={register}\r\n                  noEmptyValue\r\n                  excludeCurrent\r\n                />\r\n              </FormGroup>\r\n            </Col>\r\n          )}\r\n          <Col xs={12} md={isImport ? 6 : 12}>\r\n            <FormGroup>\r\n              <Label>Cantidad a mostrar</Label>\r\n              <Input\r\n                type=\"number\"\r\n                name=\"count\"\r\n                innerRef={register({ validate: (d) => d >= 1 })}\r\n              />\r\n            </FormGroup>\r\n          </Col>\r\n        </Row>\r\n        <hr />\r\n        <Row>\r\n          <Col md=\"2\">\r\n            <FormGroup>\r\n              <Label for=\"id\">ID</Label>\r\n              <Input id=\"id\" name=\"id\" innerRef={register} autoComplete=\"off\" />\r\n            </FormGroup>\r\n          </Col>\r\n          <Col md=\"4\">\r\n            <FormGroup>\r\n              <Label for=\"number\">Número</Label>\r\n              <Input\r\n                id=\"number\"\r\n                name=\"number\"\r\n                innerRef={register}\r\n                autoComplete=\"off\"\r\n              />\r\n            </FormGroup>\r\n          </Col>\r\n          <Col md=\"6\">\r\n            <FormGroup>\r\n              <Label for=\"info\">Información</Label>\r\n              <Input\r\n                id=\"info\"\r\n                name=\"info\"\r\n                innerRef={register}\r\n                autoComplete=\"off\"\r\n              />\r\n            </FormGroup>\r\n          </Col>\r\n        </Row>\r\n        <hr />\r\n        <Row>\r\n          <Col md=\"4\">\r\n            <FormGroup>\r\n              <Label for=\"comments\">Comentarios</Label>\r\n              <Input\r\n                id=\"comments\"\r\n                name=\"comments\"\r\n                innerRef={register}\r\n                autoComplete=\"off\"\r\n              />\r\n            </FormGroup>\r\n            <FormGroup check>\r\n              <Label check>\r\n                <Input\r\n                  type=\"checkbox\"\r\n                  checked={getValues('comments') === '*'}\r\n                  onChange={(e) => {\r\n                    setValue('comments', e.target.checked ? '*' : '', {\r\n                      shouldDirty: true,\r\n                    })\r\n                    forceUpdate()\r\n                  }}\r\n                />\r\n                Comentario no vacío\r\n              </Label>\r\n            </FormGroup>\r\n          </Col>\r\n          <Col md=\"4\">\r\n            <FormGroup>\r\n              <Label for=\"answeredOn\">Última vez atendido el</Label>\r\n              <Input\r\n                id=\"answeredOn\"\r\n                name=\"answeredOn\"\r\n                innerRef={register({\r\n                  pattern: /^(\\d{2}\\/\\d{2}\\/\\d{4}|Nunca)$/,\r\n                })}\r\n                placeholder=\"Ej.: 13/04/2020\"\r\n                autoComplete=\"off\"\r\n              />\r\n              {errors.answeredOn && (\r\n                <Error>\r\n                  Formato inválido, debe ser dia/mes/año, 'Nunca' o dejar vacío.\r\n                </Error>\r\n              )}\r\n            </FormGroup>\r\n            <FormGroup check>\r\n              <Label check>\r\n                <Input\r\n                  type=\"checkbox\"\r\n                  checked={getValues('answeredOn') === 'Nunca'}\r\n                  onChange={(e) => {\r\n                    setValue('answeredOn', e.target.checked ? 'Nunca' : '', {\r\n                      shouldDirty: true,\r\n                    })\r\n                    forceUpdate()\r\n                  }}\r\n                />\r\n                Nunca antes atendió\r\n              </Label>\r\n            </FormGroup>\r\n          </Col>\r\n          <Col md=\"4\">\r\n            <FormGroup>\r\n              <Label for=\"calledOn\">Última vez llamado el</Label>\r\n              <Input\r\n                id=\"calledOn\"\r\n                name=\"calledOn\"\r\n                innerRef={register({\r\n                  pattern: /^(\\d{2}\\/\\d{2}\\/\\d{4}|Nunca)$/,\r\n                })}\r\n                placeholder=\"Ej.: 13/04/2020\"\r\n                autoComplete=\"off\"\r\n              />\r\n\r\n              {errors.calledOn && (\r\n                <Error>\r\n                  Formato inválido, debe ser dia/mes/año, 'Nunca' o dejar vacío.\r\n                </Error>\r\n              )}\r\n            </FormGroup>\r\n            <FormGroup check>\r\n              <Label check>\r\n                <Input\r\n                  type=\"checkbox\"\r\n                  checked={getValues('calledOn') === 'Nunca'}\r\n                  onChange={(e) => {\r\n                    setValue('calledOn', e.target.checked ? 'Nunca' : '', {\r\n                      shouldDirty: true,\r\n                    })\r\n                    forceUpdate()\r\n                  }}\r\n                />\r\n                Nunca antes llamado\r\n              </Label>\r\n            </FormGroup>\r\n          </Col>\r\n        </Row>\r\n        <hr />\r\n        <Row>\r\n          <Col md=\"4\">\r\n            <FormGroup check>\r\n              <Label check>\r\n                <Input type=\"checkbox\" name=\"noWeekends\" innerRef={register} />\r\n                No llamar los fines de semana\r\n              </Label>\r\n            </FormGroup>\r\n          </Col>\r\n          <Col md=\"4\">\r\n            <FormGroup check>\r\n              <Label check>\r\n                <Input type=\"checkbox\" name=\"noCall\" innerRef={register} />\r\n                No visitar\r\n              </Label>\r\n            </FormGroup>\r\n          </Col>\r\n          <Col md=\"4\">\r\n            <FormGroup check>\r\n              <Label check>\r\n                <Input type=\"checkbox\" name=\"nonExistent\" innerRef={register} />\r\n                No existente\r\n              </Label>\r\n            </FormGroup>\r\n          </Col>\r\n        </Row>\r\n        <hr />\r\n        <Row>\r\n          <Col md={isImport ? 6 : 4}>\r\n            <Button block outline onClick={() => reset()}>\r\n              Limpiar campos\r\n            </Button>\r\n          </Col>\r\n          <Col md={isImport ? 6 : 4}>\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={\r\n                isImport\r\n                  ? !isValid || isSubmitting\r\n                  : (!isDirty &&\r\n                      !getValues('answeredOn') &&\r\n                      !getValues('calledOn') &&\r\n                      !getValues('comments')) ||\r\n                    !isValid ||\r\n                    isSubmitting\r\n              }\r\n              color=\"primary\"\r\n              block\r\n            >\r\n              Buscar{!isImport ? ' con filtros' : ''}\r\n            </Button>\r\n          </Col>\r\n          {!isImport && (\r\n            <Col md=\"4\">\r\n              <Button color=\"success\" block onClick={searchAny}>\r\n                Buscar todos\r\n              </Button>\r\n            </Col>\r\n          )}\r\n        </Row>\r\n      </Form>\r\n    </>\r\n  )\r\n}\r\n\r\nexport { SearchForm }\r\n","import React, { useCallback, useMemo, useState } from 'react'\r\nimport { Button, Table, Input } from 'reactstrap'\r\nimport styled, { css } from 'styled-components'\r\nimport { Phone } from 'types'\r\nimport { useConfig } from 'hooks'\r\nimport { Spinner } from 'components'\r\n\r\ninterface SearchResultProps {\r\n  entries: Phone[]\r\n  count: number\r\n  onEditRequest: (phone: Phone) => void\r\n  onDeleteRequest: (id: number) => void\r\n  onDeleteManyRequest: (ids: number[]) => void\r\n  onImport: (ids: number[]) => void\r\n  isImport: boolean\r\n  isImporting: boolean\r\n}\r\n\r\ntype CheckedMap = { [k: number]: boolean }\r\n\r\nconst SearchResult: React.FC<SearchResultProps> = ({\r\n  entries,\r\n  count,\r\n  onEditRequest,\r\n  onDeleteRequest,\r\n  onDeleteManyRequest,\r\n  onImport,\r\n  isImport,\r\n  isImporting,\r\n}) => {\r\n  const { currentTerritory, territories } = useConfig()\r\n  const buildCheckedInputs = useCallback(\r\n    (checked: boolean) =>\r\n      entries.reduce((acc, curr) => {\r\n        acc[curr.id] = checked\r\n        return acc\r\n      }, {} as CheckedMap),\r\n    [entries]\r\n  )\r\n  const [checkedInputs, setCheckedInputs] = useState<CheckedMap>(() =>\r\n    buildCheckedInputs(false)\r\n  )\r\n\r\n  const onCheckInput = (id: number, checked: boolean) =>\r\n    setCheckedInputs({ ...checkedInputs, [id]: checked })\r\n\r\n  const allSelected = useMemo(\r\n    () => !Object.values(checkedInputs).some((checked) => !checked),\r\n    [checkedInputs]\r\n  )\r\n\r\n  const onToggleSelectAll = () =>\r\n    setCheckedInputs(buildCheckedInputs(!allSelected))\r\n\r\n  const selectedCount = useMemo(\r\n    () => Object.values(checkedInputs).filter(Boolean).length,\r\n    [checkedInputs]\r\n  )\r\n\r\n  const handleDeleteMany = () =>\r\n    onDeleteManyRequest(\r\n      Object.entries(checkedInputs)\r\n        .filter(([, checked]) => checked)\r\n        .map(([id]) => parseInt(id))\r\n    )\r\n\r\n  const handleImport = () =>\r\n    onImport(\r\n      Object.entries(checkedInputs)\r\n        .filter(([, checked]) => checked)\r\n        .map(([id]) => parseInt(id))\r\n    )\r\n\r\n  const onSelfAssign = (id: number) => {\r\n    const a = document.createElement('a')\r\n    a.href = `/${currentTerritory.name}/telefonica?id=${id}`\r\n    a.target = '_blank'\r\n    document.body.appendChild(a)\r\n    a.click()\r\n    a.remove()\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h3>\r\n        Mostrando {entries.length} de {count} resultados.\r\n      </h3>\r\n      <Hr />\r\n      <ActionPanel>\r\n        {isImporting ? (\r\n          <Spinner />\r\n        ) : (\r\n          <>\r\n            ({selectedCount} seleccionados)\r\n            <span style={{ margin: '0 1rem' }}>|</span>\r\n            <Button color=\"secondary\" onClick={onToggleSelectAll}>\r\n              {allSelected ? 'Des' : 'S'}eleccionar todos\r\n            </Button>\r\n            {isImport ? (\r\n              <Button\r\n                color=\"success\"\r\n                disabled={selectedCount === 0}\r\n                onClick={handleImport}\r\n              >\r\n                Importar todos los seleccionados\r\n              </Button>\r\n            ) : (\r\n              <Button\r\n                color=\"danger\"\r\n                disabled={selectedCount === 0}\r\n                onClick={handleDeleteMany}\r\n              >\r\n                Borrar todos los seleccionados\r\n              </Button>\r\n            )}\r\n          </>\r\n        )}\r\n      </ActionPanel>\r\n      <Table striped responsive>\r\n        <Thead>\r\n          <tr>\r\n            <th />\r\n            <th>ID</th>\r\n            {isImport && <th>Territorio</th>}\r\n            <th>Número</th>\r\n            <th>Info</th>\r\n            <th>Última vez llamado</th>\r\n            <th>Última vez que atendió</th>\r\n            <th>Comentarios</th>\r\n            <th>Días pospuesto</th>\r\n            <th>Características</th>\r\n            {!isImport && !!currentTerritory.campaignMode && (\r\n              <th style={{ color: 'gold' }}>Completado en campaña</th>\r\n            )}\r\n            {!isImport && <th>Acciones</th>}\r\n          </tr>\r\n        </Thead>\r\n        <Tbody>\r\n          {entries.map((phone) => (\r\n            <tr key={phone.id}>\r\n              <td>\r\n                <Centered>\r\n                  <Input\r\n                    type=\"checkbox\"\r\n                    checked={checkedInputs[phone.id]}\r\n                    onChange={(e) => onCheckInput(phone.id, e.target.checked)}\r\n                  />\r\n                </Centered>\r\n              </td>\r\n              <td>{phone.id}</td>\r\n              {isImport && (\r\n                <td>\r\n                  {territories.find((t) => t.id === phone.territoryId)?.name}\r\n                </td>\r\n              )}\r\n              <PhoneCell>{phone.phone}</PhoneCell>\r\n              <td>{phone.info}</td>\r\n              <td>{phone.unansweredDate || phone.fulfilledOn || 'Nunca'}</td>\r\n              <td>{phone.answeredOn || 'Nunca'}</td>\r\n              <td>{phone.comments}</td>\r\n              <td>{phone.postponedDays}</td>\r\n              <td>\r\n                {[\r\n                  phone.noCall && 'No visitar',\r\n                  phone.nonExistent && 'No existe',\r\n                  phone.noWeekends && 'No llamar los finde',\r\n                ]\r\n                  .filter(Boolean)\r\n                  .join(', ')}\r\n              </td>\r\n              {!isImport && !!currentTerritory.campaignMode && (\r\n                <td style={{ color: 'gold' }}>\r\n                  {phone.campaignStatus ? 'Sí' : 'No'}\r\n                </td>\r\n              )}\r\n              {!isImport && (\r\n                <ActionCell>\r\n                  <Button\r\n                    color=\"success\"\r\n                    onClick={() => onSelfAssign(phone.id)}\r\n                  >\r\n                    Autoasignar\r\n                  </Button>\r\n                  <Button color=\"warning\" onClick={() => onEditRequest(phone)}>\r\n                    Editar\r\n                  </Button>\r\n                  <Button\r\n                    color=\"danger\"\r\n                    onClick={() => onDeleteRequest(phone.id)}\r\n                  >\r\n                    Borrar\r\n                  </Button>\r\n                </ActionCell>\r\n              )}\r\n            </tr>\r\n          ))}\r\n        </Tbody>\r\n      </Table>\r\n    </>\r\n  )\r\n}\r\n\r\nconst Thead = styled.thead`\r\n  text-align: center;\r\n\r\n  > tr > th {\r\n    vertical-align: middle;\r\n  }\r\n`\r\n\r\nconst Tbody = styled.tbody`\r\n  text-align: center;\r\n`\r\n\r\nconst PhoneCell = styled.td`\r\n  white-space: nowrap;\r\n`\r\n\r\nconst ActionCell = styled.td`\r\n  white-space: nowrap;\r\n\r\n  button:not(:first-of-type) {\r\n    margin-left: 1em;\r\n  }\r\n`\r\n\r\nconst ActionPanel = styled.div`\r\n  padding: 0.5rem 0;\r\n  margin-bottom: 1rem;\r\n  position: sticky;\r\n  top: 0;\r\n  background: ${({ theme }) => theme.text.colors.white};\r\n  z-index: 1;\r\n\r\n  ${({ theme }) =>\r\n    theme.darkMode &&\r\n    css`\r\n      background: ${theme.text.colors.black};\r\n      color: ${theme.text.colors.white};\r\n    `}\r\n\r\n  button:not(:first-of-type) {\r\n    margin-left: 1em;\r\n  }\r\n`\r\n\r\nconst Centered = styled.div`\r\n  padding-left: 1.5rem;\r\n  position: relative;\r\n`\r\n\r\nconst Hr = styled.hr`\r\n  border-top: ${({ theme }) =>\r\n    theme.darkMode && '1px solid rgba(255,255,255,.1)'};\r\n`\r\n\r\nexport { SearchResult }\r\n","import React, { useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport {\r\n  Button,\r\n  Col,\r\n  Container,\r\n  Form,\r\n  FormGroup,\r\n  Input,\r\n  Label,\r\n  Row,\r\n} from 'reactstrap'\r\nimport { Alert, Spinner, useAlerts } from 'components'\r\nimport { useFetch } from 'hooks'\r\nimport { Phone } from 'types'\r\n\r\ntype Fields = Pick<\r\n  Phone,\r\n  | 'comments'\r\n  | 'info'\r\n  | 'noCall'\r\n  | 'nonExistent'\r\n  | 'postponedDays'\r\n  | 'phone'\r\n  | 'noWeekends'\r\n>\r\n\r\ntype EditableFields = {\r\n  [k in keyof Fields]: NonNullable<Fields[k]>\r\n}\r\n\r\ninterface EditPhoneProps {\r\n  phone: Phone\r\n  onBack: () => void\r\n  onUpdated: (updatedPhone: Phone) => void\r\n}\r\n\r\nconst EditPhone: React.FC<EditPhoneProps> = ({ phone, onBack, onUpdated }) => {\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    errors,\r\n    formState: { isDirty, isValid },\r\n  } = useForm<EditableFields>({\r\n    mode: 'all',\r\n    reValidateMode: 'onChange',\r\n    defaultValues: {\r\n      phone: phone.phone,\r\n      comments: phone.comments,\r\n      info: phone.info ?? '',\r\n      noCall: phone.noCall,\r\n      nonExistent: phone.nonExistent,\r\n      postponedDays: phone.postponedDays,\r\n      noWeekends: phone.noWeekends,\r\n    },\r\n  })\r\n\r\n  const [isLoading, setIsLoading] = useState<boolean>(false)\r\n\r\n  const Fetch = useFetch()\r\n  const { AlertManager } = useAlerts()\r\n\r\n  const onSaveEdition = async (formData: EditableFields) => {\r\n    try {\r\n      setIsLoading(true)\r\n\r\n      const [err, updatedPhone] = await Fetch().put<\r\n        EditableFields,\r\n        { phone: Phone }\r\n      >(`phones/${phone.id}`, formData)\r\n\r\n      if (err) throw err\r\n\r\n      onUpdated(updatedPhone.phone)\r\n      AlertManager.show('update-success')\r\n    } catch {\r\n      AlertManager.show('update-error')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Alert name=\"update-success\" position=\"top\" variant=\"success\">\r\n        ¡Número actualizado con éxito! ✨\r\n      </Alert>\r\n      <Alert name=\"update-error\" position=\"bottom\" variant=\"failure\">\r\n        No se pudo actualizar el teléfono. Por favor, intente de nuevo.\r\n      </Alert>\r\n      <Container className=\"pt-4\">\r\n        <h1>Editar número</h1>\r\n        <Form onSubmit={handleSubmit(onSaveEdition)}>\r\n          <Row>\r\n            <Col md=\"3\">\r\n              <FormGroup>\r\n                <Label>Número</Label>\r\n                <Input name=\"phone\" innerRef={register} />\r\n              </FormGroup>\r\n            </Col>\r\n            <Col md=\"6\">\r\n              <FormGroup>\r\n                <Label>Info</Label>\r\n                <Input name=\"info\" innerRef={register} />\r\n              </FormGroup>\r\n            </Col>\r\n            <Col md=\"3\">\r\n              <FormGroup>\r\n                <Label>Días pospuesto</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  name=\"postponedDays\"\r\n                  innerRef={register({ validate: (d) => d >= 0 })}\r\n                />\r\n              </FormGroup>\r\n              {errors.postponedDays && (\r\n                <span className=\"text-danger\">Valor inválido</span>\r\n              )}\r\n            </Col>\r\n            <Col md=\"12\">\r\n              <FormGroup>\r\n                <Label>Comentarios</Label>\r\n                <Input name=\"comments\" innerRef={register} />\r\n              </FormGroup>\r\n            </Col>\r\n            <Col md=\"4\">\r\n              <FormGroup check>\r\n                <Label check>\r\n                  <Input\r\n                    type=\"checkbox\"\r\n                    name=\"noWeekends\"\r\n                    innerRef={register}\r\n                  />\r\n                  No llamar los finde\r\n                </Label>\r\n              </FormGroup>\r\n            </Col>\r\n            <Col md=\"4\">\r\n              <FormGroup check>\r\n                <Label check>\r\n                  <Input type=\"checkbox\" name=\"noCall\" innerRef={register} />\r\n                  No visitar\r\n                </Label>\r\n              </FormGroup>\r\n            </Col>\r\n            <Col md=\"4\">\r\n              <FormGroup check>\r\n                <Label check>\r\n                  <Input\r\n                    type=\"checkbox\"\r\n                    name=\"nonExistent\"\r\n                    innerRef={register}\r\n                  />\r\n                  No existente\r\n                </Label>\r\n              </FormGroup>\r\n            </Col>\r\n          </Row>\r\n          <hr />\r\n          <Row>\r\n            <Col md=\"6\">\r\n              <Button outline block onClick={onBack}>\r\n                Volver atrás\r\n              </Button>\r\n            </Col>\r\n            <Col md=\"6\">\r\n              <Button\r\n                type=\"submit\"\r\n                block\r\n                color=\"primary\"\r\n                disabled={!isDirty || !isValid}\r\n              >\r\n                {isLoading ? <Spinner fulfill /> : 'Guardar'}\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n        </Form>\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n\r\nexport { EditPhone }\r\n","import React, { FunctionComponent, useEffect, useState } from 'react'\r\nimport { Container } from 'reactstrap'\r\nimport { useConfig, useFetch } from 'hooks'\r\nimport { Phone } from 'types'\r\nimport {\r\n  Alert,\r\n  Spinner,\r\n  useAlerts,\r\n  useConfirmationModal,\r\n  ConfirmationModal,\r\n  Breadcrumb,\r\n} from 'components'\r\nimport { EditPhone, SearchForm, SearchResult } from './components'\r\nimport { Filters, SearchResponse } from './types'\r\n\r\nconst breadcrumbItems = [\r\n  {\r\n    title: 'Panel de Administración',\r\n    linkTo: '/admin-panel',\r\n  },\r\n  {\r\n    title: 'Buscar y editar',\r\n  },\r\n]\r\n\r\nconst importBreadcrumbItems = [\r\n  {\r\n    title: 'Panel de Administración',\r\n    linkTo: '/admin-panel',\r\n  },\r\n  {\r\n    title: 'Agregar Números',\r\n    linkTo: '/admin-panel/add-phones',\r\n  },\r\n  {\r\n    title: 'Importar',\r\n  },\r\n]\r\n\r\ntype SearchAndEditProps = {\r\n  isImport?: boolean\r\n}\r\n\r\nconst SearchAndEdit: FunctionComponent<SearchAndEditProps> = ({\r\n  isImport = false,\r\n}) => {\r\n  const [foundPhones, setFoundPhones] = useState<\r\n    SearchResponse['phones'] | null\r\n  >(null)\r\n  const [foundCount, setFoundCount] = useState<SearchResponse['count']>(0)\r\n  const [isLoading, setIsLoading] = useState<boolean>(false)\r\n  const [isImporting, setIsImporting] = useState<boolean>(false)\r\n\r\n  const [editingPhone, setEditingPhone] = useState<Phone | null>(null)\r\n\r\n  const [isDeleting, setIsDeleting] = useState<boolean>(false)\r\n\r\n  const { testModeEnabled } = useConfig()\r\n\r\n  const {\r\n    isModalOpen: isDeleteModalOpen,\r\n    data: idToDelete,\r\n    askEditConfirmation: askDeleteOneConfirmation,\r\n    toggleModal: toggleDeleteOneModal,\r\n    reset: resetDeleteConfirmationModal,\r\n  } = useConfirmationModal<number>()\r\n\r\n  const {\r\n    isModalOpen: isDeleteManyModalOpen,\r\n    data: idListToDelete,\r\n    askEditConfirmation: askDeleteManyConfirmation,\r\n    toggleModal: toggleDeleteManyModal,\r\n    reset: resetDeleteManyConfirmationModal,\r\n  } = useConfirmationModal<number[]>()\r\n\r\n  useEffect(() => {\r\n    setFoundPhones(null)\r\n    setFoundCount(0)\r\n    setEditingPhone(null)\r\n  }, [testModeEnabled])\r\n\r\n  const Fetch = useFetch()\r\n  const { AlertManager } = useAlerts()\r\n\r\n  const handleSearch = async (filters: Filters) => {\r\n    try {\r\n      setIsLoading(true)\r\n\r\n      const [err, result] = await Fetch().get<SearchResponse>({\r\n        path: 'phones',\r\n        params: Object.entries(filters)\r\n          .map(([k, v]) => [k, typeof v !== 'boolean' ? v : v ? 1 : 0])\r\n          .reduce(\r\n            (acc, [k, v]) => ({ ...acc, [k]: v }),\r\n            {} as Filters\r\n          ) as Record<string, string>,\r\n      })\r\n\r\n      if (err) throw err\r\n\r\n      setFoundPhones(result.phones)\r\n      setFoundCount(result.count)\r\n    } catch {\r\n      AlertManager.show('search-error')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleEditRequest = (phone: Phone) => setEditingPhone(phone)\r\n\r\n  const handleDeleteRequest = (id: number) => askDeleteOneConfirmation(id)\r\n\r\n  const handleDeleteManyRequest = (ids: number[]) =>\r\n    askDeleteManyConfirmation(ids)\r\n\r\n  const confirmDeletion = async () => {\r\n    try {\r\n      setIsDeleting(true)\r\n\r\n      const [err] = await Fetch().delete(`phones/${idToDelete}`)\r\n\r\n      if (err) throw err\r\n\r\n      resetDeleteConfirmationModal()\r\n      setFoundPhones(foundPhones!.filter((p) => p.id !== idToDelete))\r\n      setFoundCount(foundCount - 1)\r\n    } catch {\r\n      AlertManager.show('deletion-error')\r\n    } finally {\r\n      setIsDeleting(false)\r\n    }\r\n  }\r\n\r\n  const confirmManyDeletion = async () => {\r\n    if (!idListToDelete) return\r\n    try {\r\n      setIsDeleting(true)\r\n\r\n      const [err] = await Fetch().delete<{ ids: number[] }>('phones/bulk', {\r\n        ids: idListToDelete,\r\n      })\r\n\r\n      if (err) throw err\r\n\r\n      const newPhones = foundPhones!.filter(\r\n        (p) => !idListToDelete.includes(p.id)\r\n      )\r\n      setFoundPhones(newPhones)\r\n      setFoundCount(foundCount - idListToDelete.length)\r\n      resetDeleteManyConfirmationModal()\r\n    } catch {\r\n      AlertManager.show('deletion-error')\r\n    } finally {\r\n      setIsDeleting(false)\r\n    }\r\n  }\r\n\r\n  const handleImport = async (ids: number[]) => {\r\n    if (ids.length === 0) return\r\n    try {\r\n      setIsImporting(true)\r\n\r\n      const [err] = await Fetch().post<{ ids: number[] }, void>(\r\n        'phones/import',\r\n        {\r\n          ids,\r\n        }\r\n      )\r\n\r\n      if (err) throw err\r\n\r\n      const newPhones = foundPhones!.filter((p) => !ids.includes(p.id))\r\n      setFoundPhones(newPhones)\r\n      setFoundCount(foundCount - ids.length)\r\n      AlertManager.show('import-success')\r\n    } catch {\r\n      AlertManager.show('import-error')\r\n    } finally {\r\n      setIsImporting(false)\r\n    }\r\n  }\r\n\r\n  const handleBack = () => setEditingPhone(null)\r\n\r\n  const handleUpdatedPhone = (updatedPhone: Phone) =>\r\n    foundPhones &&\r\n    setFoundPhones(\r\n      foundPhones.map((p) => (p.id === updatedPhone.id ? updatedPhone : p))\r\n    )\r\n\r\n  if (editingPhone !== null)\r\n    return (\r\n      <EditPhone\r\n        phone={editingPhone}\r\n        onBack={handleBack}\r\n        onUpdated={handleUpdatedPhone}\r\n      />\r\n    )\r\n\r\n  const phoneToDelete =\r\n    idToDelete !== null && foundPhones?.find((p) => p.id === idToDelete)!\r\n\r\n  return (\r\n    <>\r\n      <Alert name=\"search-error\" position=\"top\" variant=\"failure\">\r\n        No se pudo buscar. Por favor, intente de nuevo.\r\n      </Alert>\r\n      <Alert name=\"deletion-error\" position=\"top\" variant=\"failure\">\r\n        No se pudo eliminar. Por favor, intente de nuevo.\r\n      </Alert>\r\n      <Alert name=\"import-success\" position=\"top\" variant=\"success\">\r\n        ¡Números importados exitosamente!\r\n      </Alert>\r\n      <Alert name=\"import-error\" position=\"top\" variant=\"failure\">\r\n        No se pudo importar. Por favor, intente de nuevo.\r\n      </Alert>\r\n      <Container className=\"pt-4 mb-5\">\r\n        <Breadcrumb\r\n          items={isImport ? importBreadcrumbItems : breadcrumbItems}\r\n        />\r\n        <SearchForm onSearch={handleSearch} isImport={isImport} />\r\n      </Container>\r\n      <Container fluid>\r\n        {isLoading ? (\r\n          <Spinner />\r\n        ) : (\r\n          foundPhones && (\r\n            <SearchResult\r\n              isImport={isImport}\r\n              entries={foundPhones}\r\n              count={foundCount}\r\n              onEditRequest={handleEditRequest}\r\n              onDeleteRequest={handleDeleteRequest}\r\n              onDeleteManyRequest={handleDeleteManyRequest}\r\n              onImport={handleImport}\r\n              isImporting={isImporting}\r\n            />\r\n          )\r\n        )}\r\n      </Container>\r\n      {idToDelete !== null && phoneToDelete && (\r\n        <ConfirmationModal\r\n          isOpen={isDeleteModalOpen}\r\n          toggleModal={toggleDeleteOneModal}\r\n          onConfirm={confirmDeletion}\r\n          title=\"¿Seguro que desea eliminar el siguiente número?\"\r\n          body={\r\n            isDeleting ? (\r\n              <Spinner fulfill />\r\n            ) : (\r\n              <div>\r\n                <span className=\"d-block\">ID: {phoneToDelete.id}</span>\r\n                <span className=\"d-block\">Número: {phoneToDelete.phone}</span>\r\n                <span className=\"d-block\">Info: {phoneToDelete.info}</span>\r\n              </div>\r\n            )\r\n          }\r\n          buttonColor=\"danger\"\r\n          confirmationLabel=\"Eliminar para siempre\"\r\n        />\r\n      )}\r\n      {idListToDelete !== null && (\r\n        <ConfirmationModal\r\n          isOpen={isDeleteManyModalOpen}\r\n          toggleModal={toggleDeleteManyModal}\r\n          onConfirm={confirmManyDeletion}\r\n          title={`¿Seguro que desea eliminar ${idListToDelete.length} números?`}\r\n          body={isDeleting && <Spinner fulfill />}\r\n          buttonColor=\"danger\"\r\n          confirmationLabel=\"Eliminar para siempre\"\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport { SearchAndEdit }\r\n"],"sourceRoot":""}