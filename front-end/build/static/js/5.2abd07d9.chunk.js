(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[5],{102:function(e,t,n){"use strict";var r=n(4),i=n(8),a=n(0),c=n.n(a),o=n(1),s=n.n(o),l=n(6),u=n.n(l),d=n(3),f={className:s.a.string,cssModule:s.a.object,size:s.a.string,bordered:s.a.bool,borderless:s.a.bool,striped:s.a.bool,dark:s.a.bool,hover:s.a.bool,responsive:s.a.oneOfType([s.a.bool,s.a.string]),tag:d.o,responsiveTag:d.o,innerRef:s.a.oneOfType([s.a.func,s.a.string,s.a.object])},b=function(e){var t=e.className,n=e.cssModule,a=e.size,o=e.bordered,s=e.borderless,l=e.striped,f=e.dark,b=e.hover,p=e.responsive,m=e.tag,j=e.responsiveTag,h=e.innerRef,v=Object(i.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),O=Object(d.k)(u()(t,"table",!!a&&"table-"+a,!!o&&"table-bordered",!!s&&"table-borderless",!!l&&"table-striped",!!f&&"table-dark",!!b&&"table-hover"),n),g=c.a.createElement(m,Object(r.a)({},v,{ref:h,className:O}));if(p){var x=Object(d.k)(!0===p?"table-responsive":"table-responsive-"+p,n);return c.a.createElement(j,{className:x},g)}return g};b.propTypes=f,b.defaultProps={tag:"table",responsiveTag:"div"},t.a=b},103:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return M}));var r=n(5),i=n(17),a=n(15),c=n(14),o=n.n(c),s=n(20),l=n(7),u=n(2),d=n(0),f=n(82),b=n(87),p=n(84),m=n(102),j=n(80),h=n(22),v=n(12),O=n(9);function g(){var e=Object(r.a)(["\n  color: ",";\n"]);return g=function(){return e},e}function x(){var e=Object(r.a)(["\n  color: ",";\n"]);return x=function(){return e},e}function y(){var e=Object(r.a)(["\n      background-color: "," !important;\n    "]);return y=function(){return e},e}function k(){var e=Object(r.a)(["\n  ","\n"]);return k=function(){return e},e}function w(){var e=Object(r.a)(["\n  display: flex;\n  margin: 1em 0;\n  justify-content: center;\n\n  button {\n    margin-left: 0.5em;\n  }\n"]);return w=function(){return e},e}function T(){var e=Object(r.a)(["\n  text-overflow: ellipsis;\n  overflow: hidden;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  > span {\n    max-width: 300px;\n    text-overflow: ellipsis;\n    overflow: hidden;\n  }\n"]);return T=function(){return e},e}var C=[{title:"Panel de Administraci\xf3n",linkTo:"/admin-panel"},{title:"Gestionar territorios"}],M=function(){var t,n=Object(v.c)(),r=n.territories,c=n.currentTerritory,j=n.updateTerritories,O=n.getConfigs,g=Object(d.useState)(!1),x=Object(l.a)(g,2),y=x[0],k=x[1],w=Object(d.useState)(!1),T=Object(l.a)(w,2),M=T[0],L=T[1],S=Object(d.useState)(!1),z=Object(l.a)(S,2),F=z[0],R=z[1],q=Object(d.useState)(0),P=Object(l.a)(q,2),D=P[0],U=P[1],H=Object(d.useState)(),J=Object(l.a)(H,2),$=J[0],G=J[1],B=Object(d.useState)(""),K=Object(l.a)(B,2),Q=K[0],V=K[1],W=Object(v.d)(),X=Object(h.k)().AlertManager,Y=Object(h.l)(),Z=Y.isModalOpen,ee=Y.data,te=Y.askEditConfirmation,ne=Y.toggleModal,re=Y.reset,ie=Object(h.l)(),ae=ie.isModalOpen,ce=ie.data,oe=ie.askEditConfirmation,se=ie.toggleModal,le=ie.reset,ue=!!ee&&r.find((function(e){return e.id===ee})),de=!!ce&&r.find((function(e){return e.id===ce})),fe=function(e){return"".concat(window.location.origin,"/").concat(e,"/")},be=0===(null!==(t=null===$||void 0===$?void 0:$.name)&&void 0!==t?t:"").length;Object(d.useEffect)((function(){O(W)}),[W,O]);var pe=function(){var e=Object(s.a)(o.a.mark((function e(){var t,n,i,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Q.length){e.next=2;break}return e.abrupt("return");case 2:return t=encodeURIComponent(Q),e.prev=3,k(!0),e.next=7,W().post("/territories",{name:t});case 7:if(n=e.sent,i=Object(l.a)(n,2),a=i[0],c=i[1].territory,!a){e.next=13;break}throw a;case 13:j(r.concat(c)),X.show("new-success"),V(""),R(!1),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),X.show("new-fail");case 22:return e.prev=22,k(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[3,19,22,25]])})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(s.a)(o.a.mark((function e(){var t,n,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ee&&ue){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,L(!0),e.next=6,W().delete("territories/".concat(ee));case 6:if(t=e.sent,n=Object(l.a)(t,1),!(i=n[0])){e.next=11;break}throw i;case 11:(a=r.filter((function(e){return e.id!==ee})))[0].totalNumbers+=ue.totalNumbers,j(a),re(),X.show("delete-success"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),X.show("delete-fail");case 21:return e.prev=21,L(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[2,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),je=Object(d.useCallback)(function(){var e=Object(s.a)(o.a.mark((function e(t,n,i){var c,s,u,d,f,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(c=r.find((function(e){return e.id===t})))&&("name"!==n||i)){e.next=4;break}throw new Error("onUpdate got wrong data");case 4:return s="name"===n&&i?encodeURIComponent(i):!c[n],"campaignMode"===n&&!1===s&&le(),e.next=8,W().put("territories/".concat(t),Object(a.a)({},n,s));case 8:if(u=e.sent,d=Object(l.a)(u,2),f=d[0],b=d[1].territory,!f){e.next=14;break}throw f;case 14:j(r.map((function(e){return e.id===t?b:e}))),re(),X.show("update-success",{timeout:1500}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),X.show("update-fail");case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[X,W,le,re,r,j]);return Object(d.useEffect)((function(){var e=function(e){var t;"editing-input"!==(null===(t=e.target)||void 0===t?void 0:t.id)&&$&&(je($.id,"name",$.name),G(void 0))};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[$,je]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(h.a,{name:"copy-success",position:"top",variant:"success",children:"Enlace copiado al portapapeles"}),Object(u.jsx)(h.a,{name:"new-success",position:"top",variant:"success",children:"\xa1Territorio creado!"}),Object(u.jsx)(h.a,{name:"new-fail",position:"top",variant:"failure",children:"No se pudo crear el territorio."}),Object(u.jsx)(h.a,{name:"delete-success",position:"top",variant:"success",children:"\xa1Territorio eliminado!"}),Object(u.jsx)(h.a,{name:"delete-fail",position:"top",variant:"failure",children:"No se pudo eliminar el territorio."}),Object(u.jsx)(h.a,{name:"update-success",position:"top",variant:"success",children:"Actualizado"}),Object(u.jsx)(h.a,{name:"update-fail",position:"top",variant:"failure",children:"No se pudo actualizar el territorio."}),Object(u.jsxs)(f.a,{className:"pt-3 mb-5",children:[Object(u.jsx)(h.b,{items:C}),Object(u.jsx)("hr",{}),Object(u.jsx)("h2",{className:"mb-4",children:"Territorios"}),Object(u.jsxs)("ul",{className:"mb-4",children:[Object(u.jsx)("li",{children:"No se puede eliminar el primer territorio ni el actual seleccionado"}),Object(u.jsx)("li",{children:'Los territorios privados solo pueden "desbloquearse" con el enlace de territorio, por dispositivo'})]}),Object(u.jsx)(b.a,{color:"success",onClick:function(){return R((function(e){return!e}))},children:"Nuevo"}),Object(u.jsx)(p.a,{isOpen:F,children:Object(u.jsx)(N,{children:y?Object(u.jsx)(h.g,{}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(E,{placeholder:"Nombre",value:Q,onChange:function(e){return V(e.target.value)}}),Object(u.jsx)(b.a,{color:"info",onClick:pe,disabled:0===Q.length,children:"Crear"})]})})}),Object(u.jsxs)(m.a,{borderless:!0,responsive:!0,children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Nombre"}),Object(u.jsx)("th",{children:"Estado"}),Object(u.jsx)("th",{children:"Enlace"}),Object(u.jsx)("th",{children:"En campa\xf1a"}),Object(u.jsx)("th",{children:"P\xfablico"}),Object(u.jsx)("th",{children:"Acciones"})]})}),Object(u.jsx)("tbody",{children:r.map((function(t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{onMouseEnter:function(){return U(t.id)},onMouseLeave:function(){return U(0)},children:(null===$||void 0===$?void 0:$.id)===t.id?Object(u.jsx)(E,{id:"editing-input",value:$.name,onChange:function(e){return G(Object(i.a)(Object(i.a)({},$),{},{name:e.target.value}))},error:be}):Object(u.jsxs)(u.Fragment,{children:[t.name,D!==t.id?" (".concat(t.totalNumbers,")"):Object(u.jsxs)(u.Fragment,{children:[" ",Object(u.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e((function(){return G({id:t.id,name:t.name})}))},children:"\u270f\ufe0f"})]})]})}),Object(u.jsx)(_,{active:!!t.active,children:t.active?"Habilitado":"Deshabilitado"}),Object(u.jsxs)(I,{children:[Object(u.jsx)("a",{href:fe(t.name),target:"_new",children:fe(t.name)}),Object(u.jsx)(b.a,{color:"secondary",size:"sm",style:{marginRight:".5em",marginLeft:".5em"},onClick:function(){return e=t.name,navigator.clipboard.writeText(fe(e)),void X.show("copy-success");var e},children:"Copiar"})]}),Object(u.jsx)(A,{active:!!t.campaignMode,completed:100===t.completed,children:t.campaignMode?"Activa (".concat(t.completed,"% completado)"):"No"}),Object(u.jsx)("td",{children:Object(u.jsx)(h.h,{id:t.id.toString(),checked:!!t.public,onChange:function(){return je(t.id,"public")}})}),Object(u.jsxs)("td",{style:{display:"flex",justifyContent:"center"},children:[Object(u.jsx)(b.a,{color:t.active?"warning":"success",size:"sm",onClick:function(){return je(t.id,"active")},children:t.active?"Deshabilitar":"Habilitar"}),Object(u.jsxs)(b.a,{color:t.campaignMode?"secondary":"info",size:"sm",style:{marginLeft:".5em"},onClick:t.campaignMode?function(){return oe(t.id)}:function(){return je(t.id,"campaignMode")},children:[t.campaignMode?"Desactivar":"Activar"," campa\xf1a"]}),Object(u.jsx)(b.a,{style:{marginLeft:".5em"},color:"danger ",size:"sm",onClick:function(){return te(t.id)},disabled:t.id===c.id||1===t.id,children:"Eliminar"})]})]},t.id)}))})]})]}),null!==ee&&ue&&Object(u.jsx)(h.c,{isOpen:Z,toggleModal:ne,onConfirm:me,title:"\xa1Advertencia!",body:M?Object(u.jsx)(h.g,{fulfill:!0}):Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"Al borrar un territorio, todos los n\xfameros que tenga asignado actualmente no ser\xe1n borrados, sino que ser\xe1n movidos al territorio base."}),Object(u.jsx)("p",{children:"\xbfSeguro que desea eliminar el siguiente territorio?"}),Object(u.jsxs)("span",{className:"d-block",children:["Nombre: ",ue.name]})]}),buttonColor:"danger",confirmationLabel:"Eliminar"}),null!==ce&&de&&Object(u.jsx)(h.c,{isOpen:ae,toggleModal:se,onConfirm:function(){return je(ce,"campaignMode")},title:"\xa1Advertencia!",body:Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"Al desactivar la campa\xf1a de este territorio, la campa\xf1a se reinicir\xe1 a cero y se perder\xe1 todo el progreso actual."}),Object(u.jsx)("p",{children:"\xbfSeguro que desea desactivar la campa\xf1a del siguiente territorio?"}),Object(u.jsxs)("span",{className:"d-block",children:["Nombre: ",de.name]})]}),buttonColor:"danger",confirmationLabel:"Desactivar"})]})},I=O.c.td(T()),N=O.c.div(w()),E=Object(O.c)(j.a)(k(),(function(e){var t=e.error,n=e.theme;return t&&Object(O.b)(y(),n.text.colors.error)})),_=O.c.td(x(),(function(e){var t=e.active,n=e.theme,r=e.neutral;return t?n.text.colors.green:r?"":n.text.colors.error})),A=O.c.td(g(),(function(e){var t=e.active,n=e.theme,r=e.completed;return t?r?n.text.colors.green:n.text.colors.yellow:""}))}).call(this,n(107).setImmediate)},107:function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(108),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(46))},108:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,a={},c=!1,o=e.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(e);s=s&&s.setTimeout?s:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){u(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&u(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},r=function(t){e.port2.postMessage(t)}}():o&&"onreadystatechange"in o.createElement("script")?function(){var e=o.documentElement;r=function(t){var n=o.createElement("script");n.onreadystatechange=function(){u(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(u,0,e)},s.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var c={callback:e,args:t};return a[i]=c,r(i),i++},s.clearImmediate=l}function l(e){delete a[e]}function u(e){if(c)setTimeout(u,0,e);else{var t=a[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{l(e),c=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(46),n(59))},111:function(e,t,n){"use strict";n.r(t);var r=n(103);n.d(t,"default",(function(){return r.a}))}}]);
//# sourceMappingURL=5.2abd07d9.chunk.js.map