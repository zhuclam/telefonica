(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[5],{101:function(e,t,n){"use strict";var r=n(4),a=n(7),i=n(0),c=n.n(i),o=n(1),s=n.n(o),l=n(6),u=n.n(l),d=n(3),f={className:s.a.string,cssModule:s.a.object,size:s.a.string,bordered:s.a.bool,borderless:s.a.bool,striped:s.a.bool,dark:s.a.bool,hover:s.a.bool,responsive:s.a.oneOfType([s.a.bool,s.a.string]),tag:d.o,responsiveTag:d.o,innerRef:s.a.oneOfType([s.a.func,s.a.string,s.a.object])},b=function(e){var t=e.className,n=e.cssModule,i=e.size,o=e.bordered,s=e.borderless,l=e.striped,f=e.dark,b=e.hover,p=e.responsive,m=e.tag,j=e.responsiveTag,v=e.innerRef,h=Object(a.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),O=Object(d.k)(u()(t,"table",!!i&&"table-"+i,!!o&&"table-bordered",!!s&&"table-borderless",!!l&&"table-striped",!!f&&"table-dark",!!b&&"table-hover"),n),g=c.a.createElement(m,Object(r.a)({},h,{ref:v,className:O}));if(p){var x=Object(d.k)(!0===p?"table-responsive":"table-responsive-"+p,n);return c.a.createElement(j,{className:x},g)}return g};b.propTypes=f,b.defaultProps={tag:"table",responsiveTag:"div"},t.a=b},102:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var r=n(8),a=n(17),i=n(16),c=n(15),o=n.n(c),s=n(21),l=n(9),u=n(2),d=n(0),f=n(80),b=n(86),p=n(83),m=n(101),j=n(94),v=n(20),h=n(14),O=n(5);function g(){var e=Object(r.a)(["\n  color: ",";\n"]);return g=function(){return e},e}function x(){var e=Object(r.a)(["\n  color: ",";\n"]);return x=function(){return e},e}function y(){var e=Object(r.a)(["\n      background-color: "," !important;\n    "]);return y=function(){return e},e}function w(){var e=Object(r.a)(["\n  ","\n"]);return w=function(){return e},e}function k(){var e=Object(r.a)(["\n  display: flex;\n  margin: 1em 0;\n  justify-content: center;\n\n  button {\n    margin-left: 0.5em;\n  }\n"]);return k=function(){return e},e}function T(){var e=Object(r.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return T=function(){return e},e}function M(){var e=Object(r.a)(["\n  text-overflow: ellipsis;\n  overflow: hidden;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  > span {\n    max-width: 300px;\n    text-overflow: ellipsis;\n    overflow: hidden;\n  }\n"]);return M=function(){return e},e}var C=[{title:"Panel de Administraci\xf3n",linkTo:"/admin-panel"},{title:"Gestionar territorios"}],E=function(){var t,n=Object(h.b)(),r=n.territories,c=n.currentTerritory,j=n.updateTerritories,O=n.getConfigs,g=Object(d.useState)(!1),x=Object(l.a)(g,2),y=x[0],w=x[1],k=Object(d.useState)(!1),T=Object(l.a)(k,2),M=T[0],E=T[1],L=Object(d.useState)(!1),F=Object(l.a)(L,2),q=F[0],D=F[1],P=Object(d.useState)(0),R=Object(l.a)(P,2),H=R[0],J=R[1],$=Object(d.useState)(),G=Object(l.a)($,2),B=G[0],K=G[1],Q=Object(d.useState)(""),U=Object(l.a)(Q,2),V=U[0],W=U[1],X=Object(h.c)(),Y=Object(v.k)().AlertManager,Z=Object(v.l)(),ee=Z.isModalOpen,te=Z.data,ne=Z.askEditConfirmation,re=Z.toggleModal,ae=Z.reset,ie=Object(v.l)(),ce=ie.isModalOpen,oe=ie.data,se=ie.askEditConfirmation,le=ie.toggleModal,ue=ie.reset,de=!!te&&r.find((function(e){return e.id===te})),fe=!!oe&&r.find((function(e){return e.id===oe})),be=function(e){return"".concat(window.location.origin,"/").concat(e,"/")},pe=/[^\w\d-]/i.test(V),me=/[^\w\d-]/i.test(null!==(t=null===B||void 0===B?void 0:B.name)&&void 0!==t?t:"");Object(d.useEffect)((function(){O(X)}),[X,O]);var je=function(){var e=Object(s.a)(o.a.mark((function e(){var t,n,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!pe){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,w(!0),e.next=6,X().post("/territories",{name:V});case 6:if(t=e.sent,n=Object(l.a)(t,2),a=n[0],i=n[1].territory,!a){e.next=12;break}throw a;case 12:j(r.concat(i)),Y.show("new-success"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),Y.show("new-fail");case 19:return e.prev=19,w(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(s.a)(o.a.mark((function e(){var t,n,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==te&&de){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,E(!0),e.next=6,X().delete("territories/".concat(te));case 6:if(t=e.sent,n=Object(l.a)(t,1),!(a=n[0])){e.next=11;break}throw a;case 11:(i=r.filter((function(e){return e.id!==te})))[0].totalNumbers+=de.totalNumbers,j(i),ae(),Y.show("delete-success"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),Y.show("delete-fail");case 21:return e.prev=21,E(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[2,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),he=Object(d.useCallback)(function(){var e=Object(s.a)(o.a.mark((function e(t,n,a){var c,s,u,d,f,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c=r.find((function(e){return e.id===t}))){e.next=4;break}throw new Error;case 4:return s="name"===n?a:!c[n],"campaignMode"===n&&!1===s&&ue(),e.next=8,X().put("territories/".concat(t),Object(i.a)({},n,s));case 8:if(u=e.sent,d=Object(l.a)(u,2),f=d[0],b=d[1].territory,!f){e.next=14;break}throw f;case 14:j(r.map((function(e){return e.id===t?b:e}))),ae(),Y.show("update-success",{timeout:1500}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),Y.show("update-fail");case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[Y,X,ue,ae,r,j]);return Object(d.useEffect)((function(){var e=function(e){var t;"editing-input"!==(null===(t=e.target)||void 0===t?void 0:t.id)&&B&&(he(B.id,"name",B.name),K(void 0))};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[B,he]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(v.a,{name:"copy-success",position:"top",variant:"success",children:"Enlace copiado al portapapeles"}),Object(u.jsx)(v.a,{name:"new-success",position:"top",variant:"success",children:"\xa1Territorio creado!"}),Object(u.jsx)(v.a,{name:"new-fail",position:"top",variant:"failure",children:"No se pudo crear el territorio."}),Object(u.jsx)(v.a,{name:"delete-success",position:"top",variant:"success",children:"\xa1Territorio eliminado!"}),Object(u.jsx)(v.a,{name:"delete-fail",position:"top",variant:"failure",children:"No se pudo eliminar el territorio."}),Object(u.jsx)(v.a,{name:"update-success",position:"top",variant:"success",children:"Actualizado"}),Object(u.jsx)(v.a,{name:"update-fail",position:"top",variant:"failure",children:"No se pudo actualizar el territorio."}),Object(u.jsxs)(f.a,{className:"pt-3 mb-5",children:[Object(u.jsx)(v.b,{items:C}),Object(u.jsx)("hr",{}),Object(u.jsxs)(N,{children:[Object(u.jsx)("h2",{children:"Territorios:"}),Object(u.jsx)(b.a,{color:"success",onClick:function(){return D((function(e){return!e}))},children:"Nuevo"})]}),Object(u.jsx)(p.a,{isOpen:q,children:Object(u.jsx)(_,{children:y?Object(u.jsx)(v.g,{}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(A,{placeholder:"Nombre (solo se permiten letras, numeros y guiones)",value:V,onChange:function(e){return W(e.target.value)},error:pe}),Object(u.jsx)(b.a,{color:"info",onClick:je,disabled:pe,children:"Crear"})]})})}),Object(u.jsx)("p",{children:"(No se puede eliminar el territorio base ni el actual)"}),Object(u.jsxs)(m.a,{borderless:!0,responsive:!0,children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Nombre"}),Object(u.jsx)("th",{children:"Estado"}),Object(u.jsx)("th",{children:"Enlace"}),Object(u.jsx)("th",{children:"En campa\xf1a"}),Object(u.jsx)("th",{children:"Acciones"})]})}),Object(u.jsx)("tbody",{children:r.map((function(t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{onMouseEnter:function(){return 1!==t.id&&J(t.id)},onMouseLeave:function(){return J(0)},children:(null===B||void 0===B?void 0:B.id)===t.id?Object(u.jsx)(A,{id:"editing-input",value:B.name,onChange:function(e){return K(Object(a.a)(Object(a.a)({},B),{},{name:e.target.value}))},error:me}):Object(u.jsxs)(u.Fragment,{children:[t.name,H!==t.id?" (".concat(t.totalNumbers,")"):Object(u.jsxs)(u.Fragment,{children:[" ",Object(u.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e((function(){return K({id:t.id,name:t.name})}))},children:"\ud83d\udcb1"})]})]})}),Object(u.jsx)(S,{active:t.active,children:t.active?"Habilitado":"Deshabilitado"}),Object(u.jsxs)(I,{children:[Object(u.jsx)("a",{href:be(t.name),target:"_new",children:be(t.name)}),Object(u.jsx)(b.a,{color:"secondary",size:"sm",style:{marginRight:".5em"},onClick:function(){return e=t.name,navigator.clipboard.writeText(be(e)),void Y.show("copy-success");var e},children:"Copiar"})]}),Object(u.jsx)(z,{active:t.campaignMode,completed:100===t.completed,children:t.campaignMode?"Activa (".concat(t.completed,"% completado)"):"No"}),Object(u.jsxs)("td",{style:{display:"flex",justifyContent:"center"},children:[Object(u.jsx)(b.a,{color:t.active?"warning":"success",size:"sm",onClick:function(){return he(t.id,"active")},children:t.active?"Deshabilitar":"Habilitar"}),Object(u.jsxs)(b.a,{color:t.campaignMode?"secondary":"info",size:"sm",style:{marginLeft:".5em"},onClick:t.campaignMode?function(){return se(t.id)}:function(){return he(t.id,"campaignMode")},children:[t.campaignMode?"Desactivar":"Activar"," campa\xf1a"]}),Object(u.jsx)(b.a,{style:{marginLeft:".5em"},color:"danger ",size:"sm",onClick:function(){return ne(t.id)},disabled:t.id===c.id||1===t.id,children:"Eliminar"})]})]},t.id)}))})]})]}),null!==te&&de&&Object(u.jsx)(v.c,{isOpen:ee,toggleModal:re,onConfirm:ve,title:"\xa1Advertencia!",body:M?Object(u.jsx)(v.g,{fulfill:!0}):Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"Al borrar un territorio, todos los n\xfameros que tenga asignado actualmente no ser\xe1n borrados, sino que ser\xe1n movidos al territorio base."}),Object(u.jsx)("p",{children:"\xbfSeguro que desea eliminar el siguiente territorio?"}),Object(u.jsxs)("span",{className:"d-block",children:["Nombre: ",de.name]})]}),buttonColor:"danger",confirmationLabel:"Eliminar"}),null!==oe&&fe&&Object(u.jsx)(v.c,{isOpen:ce,toggleModal:le,onConfirm:function(){return he(oe,"campaignMode")},title:"\xa1Advertencia!",body:Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"Al desactivar la campa\xf1a de este territorio, la campa\xf1a se reinicir\xe1 a cero y se perder\xe1 todo el progreso actual."}),Object(u.jsx)("p",{children:"\xbfSeguro que desea desactivar la campa\xf1a del siguiente territorio?"}),Object(u.jsxs)("span",{className:"d-block",children:["Nombre: ",fe.name]})]}),buttonColor:"danger",confirmationLabel:"Desactivar"})]})},I=O.c.td(M()),N=O.c.div(T()),_=O.c.div(k()),A=Object(O.c)(j.a)(w(),(function(e){var t=e.error,n=e.theme;return t&&Object(O.b)(y(),n.text.colors.error)})),S=O.c.td(x(),(function(e){var t=e.active,n=e.theme,r=e.neutral;return t?n.text.colors.green:r?"":n.text.colors.error})),z=O.c.td(g(),(function(e){var t=e.active,n=e.theme,r=e.completed;return t?r?n.text.colors.green:n.text.colors.yellow:""}))}).call(this,n(106).setImmediate)},106:function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,a=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(a.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(107),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(46))},107:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,a=1,i={},c=!1,o=e.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(e);s=s&&s.setTimeout?s:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){u(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&u(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},r=function(t){e.port2.postMessage(t)}}():o&&"onreadystatechange"in o.createElement("script")?function(){var e=o.documentElement;r=function(t){var n=o.createElement("script");n.onreadystatechange=function(){u(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(u,0,e)},s.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var c={callback:e,args:t};return i[a]=c,r(a),a++},s.clearImmediate=l}function l(e){delete i[e]}function u(e){if(c)setTimeout(u,0,e);else{var t=i[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{l(e),c=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(46),n(58))},110:function(e,t,n){"use strict";n.r(t);var r=n(102);n.d(t,"default",(function(){return r.a}))}}]);
//# sourceMappingURL=5.5bf87a26.chunk.js.map