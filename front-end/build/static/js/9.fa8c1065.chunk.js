(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[9],{108:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return z}));var a=t(7),s=t(13),r=t.n(s),c=t(30),o=t(20),i=t(15),d=t(17),u=t(9),l=t(2),p=t(0),j=t(78),b=t(101),x=t(95),h=t(96),m=t(97),O=t(99),f=t(100),g=t(84),v=t(5),M=t(93),y=t(19),w=t(22),D=t(21),A=t(12);function P(){var e=Object(a.a)(["\n  color: ",";\n"]);return P=function(){return e},e}var k=[{title:"Panel de Administraci\xf3n",linkTo:"/admin-panel"},{title:"Configuraci\xf3n de la App"}],S="Modo de campa\xf1a",B="M\xe1ximo de intentos para no en casa",V="M\xe1ximo de intentos para el contestador",E="D\xedas que se pospone un n\xfamero al dejar un mensaje en el contestador",N='D\xedas que se pospone un n\xfamero al tocar el bot\xf3n "Aplazar"',R="D\xedas que queda congelado un n\xfamero inexistente",q=Object.values(w.b).filter((function(e){return"number"===typeof e})),z=function(){var e,n=Object(y.b)(),t=n.configurations,a=n.updateConfigs,s=Object(p.useState)(!1),v=Object(u.a)(s,2),w=v[0],P=v[1],z=Object(y.c)(),C=Object(D.i)().AlertManager,J=Object(M.a)({mode:"all",defaultValues:Object(d.a)({campaignMode:t.campaignMode,unansweredMaxAttemps:t.unansweredMaxAttemps.toString(),answeringMachineMaxAttemps:t.answeringMachineMaxAttemps.toString(),answeringMachinePostponedDays:t.answeringMachinePostponedDays.toString(),postponedButtonDays:t.postponedButtonDays.toString(),nonExistentPostponedDays:t.nonExistentPostponedDays.toString()},q.reduce((function(e,n){return Object(d.a)(Object(d.a)({},e),{},Object(i.a)({},"button".concat(n,"shown"),!t.hiddenButtons.split(",").includes(n.toString())))}),{}))}),F=J.register,G=J.handleSubmit,T=J.errors,H=J.getValues,K=J.formState,L=K.isDirty,Q=K.isValid,U=function(){var e=Object(o.a)(r.a.mark((function e(n){var t,s,o,i,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(!0),(t={}).campaignMode=n.campaignMode,t.unansweredMaxAttemps=parseInt(n.unansweredMaxAttemps),t.answeringMachineMaxAttemps=parseInt(n.answeringMachineMaxAttemps),t.answeringMachinePostponedDays=parseInt(n.answeringMachinePostponedDays),t.postponedButtonDays=parseInt(n.postponedButtonDays),t.nonExistentPostponedDays=parseInt(n.nonExistentPostponedDays),t.hiddenButtons=Object.entries(n).filter((function(e){var n=Object(u.a)(e,1)[0];return/button\dshown/.test(n)})).reduce((function(e,n){var t=Object(u.a)(n,2),a=t[0];if(!0===t[1])return e;var s=a.match(/button(\d)shown/)[1];return[].concat(Object(c.a)(e),[s])}),[]).join(","),e.next=12,z().put("/configurations",t);case 12:if(s=e.sent,o=Object(u.a)(s,2),i=o[0],d=o[1],!i){e.next=18;break}throw i;case 18:a(d.configs),C.show("update-success"),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),C.show("update-error");case 25:return e.prev=25,P(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[0,22,25,28]])})));return function(n){return e.apply(this,arguments)}}(),W=null!==(e=H("campaignMode"))&&void 0!==e?e:t.campaignMode;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(D.a,{name:"update-success",position:"top",variant:"success",children:"\xa1Configuraciones actualizadas con \xe9xito! \u2728"}),Object(l.jsx)(D.a,{name:"update-error",position:"bottom",variant:"failure",children:"No se pudo actualizar las configuraciones. Por favor, intente de nuevo."}),Object(l.jsxs)(j.a,{className:"pt-3 mb-5",children:[Object(l.jsx)(D.b,{items:k}),Object(l.jsx)("hr",{}),Object(l.jsxs)(b.a,{onSubmit:G(U),children:[Object(l.jsx)(x.a,{check:!0,children:Object(l.jsxs)(h.a,{check:!0,children:[Object(l.jsx)(m.a,{type:"checkbox",name:"campaignMode",innerRef:F}),Object(l.jsxs)(I,{active:W,children:[S," ",W?"activado":"desactivado","."]})]})}),Object(l.jsxs)("div",{children:['Cuando el modo campa\xf1a est\xe1 activado, los publicadores ver\xe1n un solo bot\xf3n de "siguiente" en vez de los ',q.length," que normalemente se usan. Esto sirve para agilizar las llamadas en caso de campa\xf1a."]}),Object(l.jsx)("hr",{}),Object(l.jsxs)(x.a,{children:[Object(l.jsx)(h.a,{children:B}),Object(l.jsx)(m.a,{type:"number",name:"unansweredMaxAttemps",innerRef:F({validate:function(e){return e>=1}})}),T.unansweredMaxAttemps&&Object(l.jsx)("span",{className:"text-danger",children:"Valor inv\xe1lido"})]}),Object(l.jsxs)(x.a,{children:[Object(l.jsx)(h.a,{children:V}),Object(l.jsx)(m.a,{type:"number",name:"answeringMachineMaxAttemps",innerRef:F({validate:function(e){return e>=1}})}),T.answeringMachineMaxAttemps&&Object(l.jsx)("span",{className:"text-danger",children:"Valor inv\xe1lido"})]}),Object(l.jsxs)(x.a,{children:[Object(l.jsx)(h.a,{children:E}),Object(l.jsx)(m.a,{type:"number",name:"answeringMachinePostponedDays",innerRef:F({validate:function(e){return e>=1}})}),T.answeringMachinePostponedDays&&Object(l.jsx)("span",{className:"text-danger",children:"Valor inv\xe1lido"})]}),Object(l.jsxs)(x.a,{children:[Object(l.jsx)(h.a,{children:N}),Object(l.jsx)(m.a,{type:"number",name:"postponedButtonDays",innerRef:F({validate:function(e){return e>=1}})}),T.postponedButtonDays&&Object(l.jsx)("span",{className:"text-danger",children:"Valor inv\xe1lido"})]}),Object(l.jsxs)(x.a,{children:[Object(l.jsx)(h.a,{children:R}),Object(l.jsx)(m.a,{type:"number",name:"nonExistentPostponedDays",innerRef:F({validate:function(e){return e>=1}})}),T.nonExistentPostponedDays&&Object(l.jsx)("span",{className:"text-danger",children:"Valor inv\xe1lido"})]}),Object(l.jsx)("hr",{}),Object(l.jsx)("p",{children:"Botones que los publicadores pueden usar:"}),Object(l.jsx)(O.a,{children:q.map((function(e){return Object(l.jsx)(f.a,{md:"6",children:Object(l.jsx)(x.a,{check:!0,children:Object(l.jsxs)(h.a,{check:!0,children:[Object(l.jsx)(m.a,{type:"checkbox",name:"button".concat(e,"shown"),innerRef:F}),A.d[e]]})})},e)}))}),Object(l.jsx)("hr",{}),Object(l.jsx)(g.a,{type:"submit",block:!0,color:"primary",disabled:!L||!Q||w,children:w?Object(l.jsx)(D.g,{fulfill:!0}):"Guardar configuraciones"})]})]})]})},I=v.c.span(P(),(function(e){var n=e.active,t=e.theme;return n?t.text.colors.green:t.text.colors.red}))}}]);
//# sourceMappingURL=9.fa8c1065.chunk.js.map